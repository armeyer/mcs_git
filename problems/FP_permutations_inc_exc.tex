\documentclass[problem]{mcs}

\begin{pcomments}
\pcomment{FP_permutations_inc_exc}
\pcomment{final.S98}
\end{pcomments}

\pkeywords{
  permutation
  inclusion_exclusion
  binomial_coefficient
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{editingnotes}
ADAMC: Michaela/permutations of letters: Neat little problem that I
solved without too much trouble, which means it probably isn't too
hard, given my combinatorics skills. :) But I still do wonder that too
many students might fail to see the trick, which isn't quite like what
we've seen in class, unless I missed an alternate solution.
\end{editingnotes}

\begin{problem}

Show that there are 16,800 permutations of the letters
$a,b,c,d,e,f,g,h$ such that neither the letters $a,b,c$
nor the letters $d,e$ occur in order.  For example, $fbgadceh$
is not allowed because $d$ occurs before $e$, and $fagbecdh$ is not
allowed because $a$ occurs before $b$ and $b$ occurs before $c$, but
$fbgaedch$ is OK.

\begin{solution}
One way is to find three positions for $a$, $b$ and $c$, then two other
positions for $d$ and $e$, and count the number of ways $a$, $b$ and
$c$, can be out of order (namely, 5), the number of ways for $de$ (namely,
1), and the permutations of remaining 3 elements (namely, 3!):
\begin{eqnarray*}
\binom{8}{3}\binom{5}{2}3!5 & = &
      \frac{8\cdot 7\cdot 6}{3\cdot 2} \frac{5\cdot 4}{2} 3 \cdot 2 \cdot 5\\
& = & (8\cdot 7)(5\cdot 2)30 = 56\cdot 300 = 16800.
\end{eqnarray*}

Inclusion-exclusion is another way: let \textit{ALL} be the $8!$ permutations of
all eight letters, let \textit{ABC} be those permutations with $a,b,c$ appearing in
order, and \textit{DE} those permutations with $d,e$ in order.  So
$\card{\textit{ABC}} = 8\cdot 7\cdot 6\cdot 5\cdot 4$, since a
permutation in \textit{ABC} is uniquely determined by the 5 out of 8 positions of
the 5 letters besides $a,b,c$.  Likewise $\card{\textit{DE}} = 8!/2!$.
Also, $\card{\textit{ABC} \intersect \textit{DE}}$ is determined by the
$8\cdot 7 \cdot 6$ positions of $f,g,h$ and then the $\binom{5}{2}$ places to put
$d$ and $e$ in order, that is,
\[
\card{\textit{ABC} \intersect \textit{DE}} = \frac{8!}{2!}\cdot
\binom{5}{2}.
\]
Then the number of allowed permutations is
\begin{align*}
\card{\textit{ALL}} - \card{\textit{ABC} \union \textit{DE}}
& = 8! - \card{\textit{ABC}} - \card{\textit{DE}} + \card{\textit{ABC} \intersect \textit{DE}}\\
& = 8! - 8!/3! - 8!/2! + 8!/5!\binom{5}{2}\\
& = 8\cdot 7\cdot 6[5! - 5\cdot 4 - 5\cdot 4\cdot 3 + 5\cdot 4/2]\\
& = 8\cdot 7\cdot 6[120-20-60+10] = 8\cdot 7\cdot 6\cdot 50 = 16,800.
\end{align*}

\end{solution}
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

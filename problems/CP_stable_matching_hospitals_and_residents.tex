\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_stable_matching_hospitals_and_residents}
  \pcomment{revised ARM 4/8/15}
  \pcomment{Added by Oshani on Prof. Meyer's instructions 03/16/11}
  \pcomment{subsumes PS_stable_matching_hospitals from S08.ps4}
\end{pcomments}

\pkeywords{
 stable_matching
 stable_marriage
 residents
 hospital
 }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
The most famous application of stable matching was in assigning
graduating medical students to hospital residencies.  Each hospital
has a preference ranking of students, and each student has a
preference ranking of hospitals, but unlike finding stable marriages
between an equal number of boys and girls, hospitals generally have
differing numbers of available residencies, and the total number of
residencies may not equal the number of graduating students.

Explain how to adapt the Stable Matching problem with an equal number
of boys and girls to this more general situation.  In particular,
modify the definition of stable matching so it applies in this
situation, and explain how to adapt the Mating Ritual to handle it.

\begin{solution}
The idea is to treat the \emph{residencies} rather than the hospitals
as men (or women) in the Mating Ritual.  So a ``matching'' will be an
assignment of students to residencies.  More precisely, a
\emph{matching} is an injection, $A: \text{students} \to
\text{residencies}$.

An assignment is ``stable'' when it has no rogue couples, where a
rogue couple is defined with the idea that a hospital would rather
have a residency filled than unfilled---even if they gave lowest rank
to the student who would be assigned to the residency, and a student
would rather have some residency than none---even if the residency was
at their lowest ranked hospital.

More precisely, for any residency $R$ let $H(R)$ be the hospital
where $R$ is located.  Then a \emph{rogue couple} for an assignment
$A$ is a residency/student pair $(R,S)$ such that
\begin{itemize}

\item $S$ has no residency assignment ($S \notin \domain{A}$), or
  $S$ likes $H(R)$ better than his assigned hospital $H(A(S))$, and

\item $R$ has no assigned student ($R \notin \range{A}$), or $A(S') =
  R$ for some student $S'$ that $H(R)$ ranks lower than $S$.
\end{itemize}

Notice that by this definition, $(R,S)$ will be a rogue couple when
both $R$ has no assigned student and $S$ is not assigned to a
residency.  So in a stable assignment, either all residencies have
students assigned to them ($A$ is a surjection), or all students have
assigned residencies ($A$ is total).

Now the Mating Ritual can be carried out with students playing the
role of men and residencies as women (or \emph{vice versa}).  A stable
assignment is bound to be the result, even if the number of students
and number of residencies are not the same (see
Problem~\bref{CP_stable_matching_unequal_boys}).
\end{solution}

\end{problem}

\endinput

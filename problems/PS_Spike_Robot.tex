\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{from: S02.ps5}
\end{pcomments}

\pkeywords{
  state_machines
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{problem}
A robot named ``Spike'' wanders around a two-dimensional
grid.  He starts out at $(0,0)$ and is allowed to take four different
types of step:

\begin{enumerate}
\item $(+2,-1)$
\item $(+1,-2)$
\item $(+1,+1)$ 
\item $(-3,0)$ 
\end{enumerate}

Thus, for example, Spike might walk as follows.  The types of his
steps are listed above the arrows.

\[
(0,0) \stackrel{1}{\rightarrow}
(2,-1) \stackrel{3}{\rightarrow}
(3,0) \stackrel{2}{\rightarrow}
(4,-2) \stackrel{4}{\rightarrow}
(1,-2) \rightarrow \ldots
\]

Spike's true love, a perky toaster named ``Daisy'', awaits at $(0,2)$.

\bparts

\ppart Describe a state machine model of this problem.

\begin{solution}
Let the set of states $Q$ be $\mathbb{Z} \times \mathbb{Z}$.
Let the set of start states $Q_0$ consist of the single state $(0,
0)$.  For each $(x, y) \in Q$, there are four transitions in $\delta$:

\beqn
(x, y) & \rightarrow & (x + 2, y - 1) \\
(x, y) & \rightarrow & (x + 1, y - 2) \\
(x, y) & \rightarrow & (x + 1, y + 1) \\
(x, y) & \rightarrow & (x - 3, y) \\
\eeqn
\end{solution}

\ppart State the most restrictive invariant you can find that
holds for all the states that Spike can reach.

\begin{solution}
Let $P$ be the property that $x + 2y$ is a multiple of 3 for
every reachable position $(x, y)$.  We show that the property is
preserved under each transition in $\delta$.  Suppose that $x + 2y =
3k$ for some $k \in \mathbb{Z}$.  Then we can show that the property
still holds after one transition as follows:

\beqn
(x + 2) + 2 (y - 1)
	& = &	x + 2 y \\
	& = &	3k \\
(x + 1) + 2 (y - 2)
	& = &	x + 2 y - 3\\
	& = &	3 (k - 1) \\
(x + 1) + 2 (y + 1)
	& = &	x + 2 y + 3\\
	& = &	3 (k + 1) \\
(x - 3) + 2 y
	& = &	x + 2 y - 3 \\
	& = &	3 (k - 1)
\eeqn

Therefore, $P$ is an invariant.
\end{solution}

\ppart Will Spike ever find his true love?  Either find a path
from Spike to Daisy or use the Invariant Theorem to prove that no such
path exists.

\begin{solution}
The invariant $P$ holds in the start state, since $0 + 2
\cdot 0 = 0$, which is a multiple of 3.  However, the invariant does
not hold for Daisy's position, $(0, 2)$, since $0 + 2 \cdot 2 = 4$ is
not a multiple of 3.  Therefore, by the Invariant Theorem, this is not
a reachable state.

Later, though, as it turns out, Spike takes one ``illegal'' step,
sweeps up Daisy, and carries her off to the third quadrant of
$\mathbb{C}^2$, where they live happily every after.
\end{solution}

\eparts
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[problem]{mcs}
\begin{pcomments}
  \pcomment{PS_search_1-n}
  \pcomment{part(a) similar to FP_unique_search_tree}
  \pcomment{ARM 10/24/17, edited Zach Abel 10.27.17}
\end{pcomments}

\pkeywords{
  trees
  binary_tree
  search_tree
  insertion
  deletion
  }

%\newcommand{\nlbla}[1]{\text{num}_{\text{alt}}{#1}}
%\newcommand{\nlblsa}[1]{\text{nums}_{\text{alt}}{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}

\bparts

\ppart Edit the labels in this size 11 tree $T$ so it becomes a
search tree for the set of labels $\Zintv{1}{11}$.

\begin{center}
\begin{verbatim}
                        T              
                       / \             
                      /   \            
                     A     B
                    / \   / \          
                   /   \ E   F
                  C     D
                 / \   / \
                G   H I   J
\end{verbatim}         
\end{center}

%\examspace[2in]

\begin{solution}

\begin{center}
\noindent
\begin{verbatim}
                          8       
                         / \      
                        /   \     
                       4     10    
                      / \   / \   
                     /   \ 9  11
                    2     6       
                   / \   / \      
                  1   3 5   7      
\end{verbatim}         
\end{center}
\end{solution}

\instatements{Reminder:

\begin{definition*}%\label{defsearchtree}
The Search trees $T \in \brnch$ are defined recursively as follows:

\inductioncase{Base case}: ($T \in \leafset$).  $T$ is a Search tree.

\inductioncase{Constructor case}: ($T \in \brnchng$).
If $\leftsub{(T)}$ and $\rightsub{(T)}$ are both Search trees, and
\[
\text{max}(\leftsub{(T)}) < \nlbl{(T)} < \text{min}(\rightsub{(T)}),
\]
then $T$ is a Search tree.
\end{definition*}
}

\ppart\label{Zintab} Let $T$ be a search tree whose labels are the
consecutive integers in the interval $\Zintv{a}{b}$ where $a,b$ are
odd integers with $b-a = \sz{T}-1$ (for example, $\Zintv{1}{\sz{T}}$).
Prove by structural induction on
\inbook{Definition~\bref{defsearchtree}}\inhandout{the definition} of
search tree that the leaves of $T$ are precisely the subtrees whose
label is an odd number:
\begin{equation}\tag{odd-label}
\text{leaves}(T) = \set{S \in \subbrn{T} \suchthat \nlbl{(S)}\text{ is odd}}.
\end{equation}

\inhandout{You may use the fact that the size of a search tree is an
  odd number \iffalse (see Problem~\bref{CP_leaves_vs_nodes})\fi and
  that all subtrees of a search tree have distinct labels.}

\begin{solution}
\begin{proof}
The induction hypothesis is $P(T) \eqdef \text{equation~(odd-label)}$.

\inductioncase{Base case}: ($T \in \leafset$).  Since $T$ is a search
tree for $\Zintv{a}{a}$, the label $\nlbl{(T)}$ equals a, which is an
odd number.

\inductioncase{Constructor case}: ($T \in \brnchng$).  $T$ is a search
tree for $\Zintv{a}{b}$, so by definition of search tree,
\begin{align*}
\leftsub{(T)} & \text{ is a search tree for labels } \Zintv{a}{(a + \sz{\leftsub{(T)}}-1)},\\
\nlbl{(T)} & = a+\sz{\leftsub{(T)}},\\
\rightsub{(T)} & \text{ is a search tree for labels }
      \Zintv{(\nlbl{(T)}+1)}{b}.\\
\end{align*}
By induction hypothesis, the leaves of $\leftsub{(T)}$ are the odd
numbers in $\Zintv{a}{(a+\sz{\leftsub{(T)}}-1)}$.  Also,
$\sz{\leftsub{(T)}}$ is odd, so $\nlbl{(T)}$ is even. Finally, again
by the inductive hypothesis, the leaves of $\rightsub{(T)}$ are the
odd numbers in $\Zintv{(\nlbl{(T)}+1)}{b}$.  Since the leaves of $T$
are precisely the leaves of $\leftsub{(T)}$ along with the leaves of
$\rightsub{(T)}$---and $T$ is itself not a leaf by assumption---this
proves the claim $P(T)$.
\end{proof}

\end{solution}

\eparts

\inbook{It now follows that a search tree for a given set of values
  cannot have \emph{any} leaves, and therefore cannot have any
  subtrees, in common with a search for the given values after just
  one deletion and one insertion.

  For example, suppose $T$ is a search tree for the values
  $\Zintv{1}{n}$, and $U$ is a search tree for these values after
  deleting 1 and inserting $n+1$, that is $\nlbls{(U)} =
  \Zintv{2}{(n+1)}$.  Then the leaves of $T$ are all odd numbered, and
  the leaves of $U$ will be even numbered (think
  why!\footnote{Subtracting one from all the labels of $U$ turns it
    into a search tree for $\Zintv{1}{n}$ whose leaves must have odd
    numbered labels.  Alternatively, the argument of
    part~\eqref{Zintab} could simply be applied to even numbered
    $a,b$.}).

  This contrasts dramatically with the case of AVL trees, in which
  leaves are allowed to hold two values.  Storing two values at
  leaves provides enough ``slack'' to allow incremental updating of
  the overall tree, so that after an insertion and deletion, the
  updated tree can share all but proportional to $\log_2\text{(tree
    size)}$ subtrees.
}
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput



\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{FP_counting_4_digit_numbers_with_sum_of_digits_22}
  \pcomment{ZDz 11/16/15}
  \pcomment{f15.mid4}
\end{pcomments}

\pkeywords{
  counting
  bijection
  binomial
  sum_of_numbers
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}

Suppose $x_1,x_2,x_3,x_4$ are nonnegative integers.  You may answer
the following questions using closed formulas possibly involving
binomial coefficients without calculating a final numerical answer.

\bparts

\ppart  How many solutions are there to the inequality $x_1+x_2+x_3+x_4 \leq 23$?
\examspace[1in]

\begin{solution}
$\binom{27}{4}$.
The same as the number of ways to choose 4 out of 27 positions in a sequence
that separate 23 remaining positions into five groups.
\end{solution}

\ppart How many solutions are there such that $x_1 > 9$ holds? %Assume $i$ is in $\set{1,2,3,4}$.
\examspace[1in]

\begin{solution}
$\binom{17}{4}$.
The same as the number of solutions to the inequality $x_1+x_2+x_3+x_4 \leq 13$
without constraints. A bijection is established by subtracting 10 from $x_1$ in
a solution to the original problem.
%\[
%\binom{4}{1} \cdot \binom{15}{3}
%\]
\end{solution}

\ppart How many solutions are there such that $x_1 > 9 \QAND x_2 > 9$ holds?
%Assume $i$ and $j$ are in $\set{1,2,3,4}$ and $i \neq j$.
\examspace[1in]

\begin{solution}
$\binom{7}{4}$.
The same as the number of solutions to the inequality $x_1+x_2+x_3+x_4 \leq 3$
without constraints. A bijection is established by subtracting 10 from $x_1$
and $x_2$ in a solution to the original problem.
%\[
%\binom{4}{2} \cdot \binom{5}{3}
%\]
\end{solution}

\ppart How many 4-digit numbers with sum of digits less than or equal to 23 are
there?
Numbers are allowed to start with 0 (e.g., $0034$ and $0000$ are %counted as
valid 4-digit numbers).
Explain your answer.
You may express your answer in terms of numbers $a,b,c$ which
are the answers to the previous parts of this problem.
 \examspace[3in]

\begin{solution}
\[
a - \binom{4}{1} b + \binom{4}{2} c
\]
The same as the number of solutions to the inequality $x_1+x_2+x_3+x_4 \leq 23$
such that $x_1, x_2, x_3, x_4$ are smaller than or equal to 9.
Let $D$ be the set of these solutions. Let $A$ be the set of solutions
without constraints and $E$ the set of solutions in which at least one
number is greater than 9. Then, $A = D \union E$ and $D \intersect E = \emptyset$,
%$D = A \setminus E$ and $|D| = |A| - |E|$.
and therefore $|D| = |A| - |E|$.

To obtain $|E|$, we use the Inclusion-Exclusion principle.
Let $B_i$ be the set of solutions in which $x_i > 9$ holds.
%Note that $|B| = b$.
Let $C_{i,j}$ be the set of solutions in which both $x_i > 9$ and $x_j > 9$ hold.
%Note that $|C_{i,j}| = c$.
Note that $C_{i,j} = B_i \intersect B_j$.
Note also that there are no solutions in which three or more variable are greater than 9.
Then,
\[
E = \union_{i} B_i \, ,
\]
and
\[
|E| = \sum_{i} |B_i| - \sum_{i < j} |C_{i,j}| = \binom{4}{1} b - \binom{4}{2} c \, .
\]
Finally,
\[
|D| = |A| - |E| = a - \binom{4}{1} b + \binom{4}{2} c \, .
\]
\end{solution}

\eparts

\iffalse

How many 4-digit numbers with sum of digits equal to 22 are there?

\hint{Inclusion-Exclusion.}

\begin{solution}
There is 

Let $x_1$, $x_2$, $x_3$ and $x_4$ be the digits of a 4-digit number $a$. Let
\begin{align*}
A & = \set{(x_1, x_2, x_3, x_4) \in \integers^4 \suchthat 0 \leq x_1, x_2, x_3, x_4 \leq 9 \QAND x_1+x_2+x_3+x_4 = 22} \\
S & = \set{(x_1, x_2, x_3, x_4) \in \integers^4 \suchthat x_1, x_2, x_3, x_4 \geq 0 \QAND x_1+x_2+x_3+x_4 = 22} \\
S_i & = \set{(x_1, x_2, x_3, x_4) \in \integers^4 \suchthat x_i \geq 10 \QAND x_j \geq 0, j \neq i \QAND x_1+x_2+x_3+x_4 = 22} \\
S_{i,j} & = \set{(x_1, x_2, x_3, x_4) \in \integers^4 \suchthat x_i, x_j \geq 10 \QAND x_k \geq 0, k \neq i,j \QAND x_1+x_2+x_3+x_4 = 22} \, .
\end{align*}
Then, $A = S \setminus (\union_i S_i)$ and
\begin{align*}
|A| & = |S| - \sum_{i=1}^4 |S_i| + \sum_{1\leq i < j \leq 4} |S_{i,j}| \\
     & = {22+4-1 \choose 4-1} - {4 \choose 1} {12+4-1 \choose 4-1} + {4 \choose 2} {2+4-1 \choose 4-1} \\
     & = {25 \choose 3} - 4 {15 \choose 3} + 6 {5 \choose 3} \\
     & = 2300 - 4 \cdot 455 + 6 \cdot 10 = 540 \, .
\end{align*}
{\color{red} TODO: Textual explanation would be better.}
\end{solution}
\fi

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

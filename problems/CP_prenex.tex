\documentclass[problem]{mcs}

\begin{pcomments}
    \pcomment{CP_prenex}
    \pcomment{by ARM 2/9/16}
\end{pcomments}

\pkeywords{
  prenex
  quantifier
  De_Morgan
  negation
  variable
  variable_convention
}

\begin{problem}
A predicate formula is in \emph{prenex form} when all its quantifiers come at the
beginning.  For example,
\[
[\forall x\, \exists y, \forall z, \exists w.\, P(x, w) \QAND (Q(x,y) \QOR R(z)]\ 
\]
is in prenex form.

It turns out that every formula is equivalent to one in prenex form.
Here's a simple recipe for converting a formula into an equivalent prenex form:

\begin{enumerate}

\item\label{varconvention} Rename variables to satisfy the \emph{variable
  convention} described in Problem~\bref{CP_variable_convention},

\item\label{toandor} Convert all connectives between formulas with a
  quantifier into \QAND, \QOR, \QNOT,

\item\label{appDeM} Use De Morgan Laws for negated quantifiers
  (Section~\bref{negquant_sec}) to push negations ``below'' all
  quantifiers,

\item\label{qtfront} Pull out all quantifiers to the front of the
  formula in any order that preserves nesting.  That is, if $\exists
  x$ occurs in a subformula starting with $\forall y$, then $\forall
  y$ has to come before $\exists x$ when the quantifiers are moved to
  the front.

\end{enumerate}

Use this method to find a prenex form for
\begin{staffnotes}
Nice to have an example where step~\ref{toandor}.\ needed a second
repeat and at a separate location.  Maybe start off without satisfying
variable convention.

Here follows the previous exercise and respective solution:
\[
[\forall x\, \exists y_1.\, P(x) \QAND Q(x,y_1)]\ \QIMPLIES 
  [(\exists x_1.\, R(x_1,z)) \QOR \exists x_2\, \forall z_1.\, S(x_2,y,w,z_1)],
\]
which already satisfies the variable convention.

\begin{align*}
\lefteqn{[\forall x\, \exists y_1.\, P(x) \QAND Q(x,y_1)]\ \QIMPLIES}\\ 
  & \qquad\qquad   (\exists x_1.\, R(x_1,z)) \QOR \exists x_2\, \forall z_1.\, S(x_2,y,w,z_1)\\
 & \corresp
  \QNOT(\forall x\, \exists y_1.\, P(x) \QAND Q(x,y_1))\ \QOR\\
  & \qquad\qquad   (\exists x_1.\, R(x_1,z)) \QOR \exists x_2\, \forall z_1.\, S(x_2,y,w,z_1)
         &\text{(step~\ref{toandor}.)}\\
 & \corresp
  \exists x\, \QNOT(\exists y_1.\, P(x) \QAND Q(x,y_1)))\ \QOR\\
  & \qquad\qquad   (\exists x_1.\, R(x_1,z)) \QOR \exists x_2\, \forall z_1.\, S(x_2,y,w,z_1)
         &\text{(start step~\ref{appDeM}.)}\\
 & \corresp
  \exists x\,\forall y_1.\, \QNOT(P(x) \QAND Q(x,y_1))\ \QOR\\
  & \qquad\qquad  (\exists x_1.\, R(x_1,z)) \QOR \exists x_2\, \forall z_1.\, S(x_2,y,w,z_1)
         &\text{(repeat step~\ref{appDeM}.)}\\
 & \corresp
  \exists x\,\forall y_1\, \exists x_1.\,  \exists x_2\, \forall z_1.\,\\
  & \qquad\qquad  \QNOT(P(x) \QAND Q(x,y_1)) \QOR  R(x_1,z)\\
  & \qquad\qquad\quad    \QOR  S(x_2,y,w,z_1).
         &\text{(step~\ref{qtfront}.)}\\
\end{align*}
\end{staffnotes}

\begin{align*}
[\forall x\, \exists y.\, P(x) \QAND Q(x,y)]\ \QIMPLIES\\
 \quad [(\exists x.\, R(x,y)) \QOR \exists z\, \forall x.\, (S(z) \QXOR T(x))],
\end{align*}

\begin{solution}
\begin{align*}
\iffalse
\lefteqn{[\forall x\, \exists y.\, P(x) \QAND Q(x,y)]\ \QIMPLIES}\\ 
  & \qquad\qquad   (\exists x.\, R(x,y)) \QOR \exists z\, \forall x.\, (S(z) \QXOR T(x))\\
   & \corresp
\fi
\lefteqn{[\forall x\, \exists y_1.\, P(x) \QAND Q(x,y_1)]\ \QIMPLIES}\\ 
  & \qquad\qquad   (\exists x_1.\, R(x_1,y)) \QOR \exists z\, \forall x_2.\, (S(z) \QXOR T(x_2))
         &\text{(step~\ref{varconvention}.)}\\
 & \corresp
  \QNOT(\forall x\, \exists y_1.\, P(x) \QAND Q(x,y_1))\ \QOR\\
  & \qquad\qquad   (\exists x_1.\, R(x_1,y)) \QOR \exists z\, \forall x_2.\, (S(z) \QXOR T(x_2))
         &\text{(step~\ref{toandor}.)}\\
 & \corresp
  \exists x\, \QNOT(\exists y_1.\, P(x) \QAND Q(x,y_1)))\ \QOR\\
  & \qquad\qquad   (\exists x_1.\, R(x_1,y)) \QOR \exists z\, \forall x_2.\, (S(z) \QXOR T(x_2))
         &\text{(start step~\ref{appDeM}.)}\\
 & \corresp
  \exists x\,\forall y_1.\, \QNOT(P(x) \QAND Q(x,y_1))\ \QOR\\
  & \qquad\qquad  (\exists x_1.\, R(x_1,y)) \QOR \exists z\, \forall x_2.\, (S(z) \QXOR T(x_2))
         &\text{(repeat step~\ref{appDeM}.)}\\
 & \corresp
  \exists x\,\forall y_1\, \exists x_1.\,  \exists z\, \forall x_2.\,\\
  & \qquad\qquad  \QNOT(P(x) \QAND Q(x,y_1)) \QOR  R(x_1,y)\\
  & \qquad\qquad\quad \QOR  (S(z) \QXOR T(x_2)).
         &\text{(step~\ref{qtfront}.)}\\
\end{align*}

\end{solution}

\end{problem}

\endinput

\documentclass[problem]{mcs}
\begin{pcomments}
  \pcomment{MQ_isomorphic_search}
  \pcomment{ARM 10/8/17}
  \pcomment{subsumed by FP_unique_search_tree}
\end{pcomments}

\pkeywords{
  trees
  binary_tree
  search_tree
  insertion
  deletion
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
The \emph{isomorphism} relation between recursive trees $T,U \in
\rectr$ is defined recursively

\inductioncase{Base case}: ($T \in \leafset$).  $T$ is isomorphic to
$U$ iff $U$ is a leaf.

\inductioncase{Constructor case}: ($T \in \brnchng$).  $T$ is
isomorphic to $U$ iff
\[
U \in \brnchng\ \QAND\
 \leftsub{(U)}\ \text{isomorphic to}\ \leftsub{(T)}\ \QAND\
\rightsub{(U)}\ \text{isomorphic to}\ \rightsub{(T)}.
\]

\bparts

\ppart\label{isosz} Prove that if $T$ and $U$ are isomorphic, then $\sz{T} = \sz{U}$.

\begin{solution}
Trivial by structural induction:

\inductioncase{Base case}: ($T \in \leafset$).  If $T$ is isomorphic
to $U$, then $U$ must also be a leaf, so $\sz{T} = 1 = \sz{U}$.

\inductioncase{Constructor case}: ($T \in \brnchng$).  If $U$
isomorphic to $T$, then by def.\ of isomorphism, $\leftsub{(T)}$ is
isomorphic to $\leftsub{(U)}$, and so
\[
\sz{\leftsub{(T)}} = \sz{\leftsub{(U)}}
\]
by induction hypothesis.  Likewise, 
\[
\sz{\rightsub{((T))}} = \sz{\rightsub{(U)}}.
\]
Therefore,
\begin{align*}
\sz{T} & = 1 + \sz{\leftsub{(T)}} + \sz{\rightsub{(T)}}\\
       & = 1 + \sz{\leftsub{(U)}} + \sz{\rightsub{(U)}} = \sz{U}.
\end{align*}
\end{solution}

\ppart\label{uniqnum} Show that if $T$ and $U$ are isomorphic search
trees for the same set of values, that is, $\nlbls{(T)} =
\nlbls{(U)}$, then $\nlbl{(T)} = \nlbl{(U)}$.

\hint By definition of isomorphism and search tree.  No induction needed.

\begin{solution}

\inductioncase{Case}: ($T \in \leafset$).  There is only one
possible labelling of $T$ and $U$ with the same value.

\inductioncase{Case}: ($T \in \brnchng$).  Since $T$ is a
search tree, all the values $\nlbls{(\leftsub{(T)})}$ in
$\leftsub{(T)}$ must be less than the label $\nlbl{(T)}$ of $T$, and
likewise all the labels in $\nlbls{(\rightsub{(T)})}$ must be greater
than $\nlbl{(T)}$.  So $\nlbls{(\leftsub{(T)})}$ must be the smallest
$\sz{\leftsub{(T)}}$ values in $\nlbls{(T)}$, and $\nlbl{(T)}$ must be
the $\sz{\leftsub{(T)}}+1$st smallest value.  Since $T$ and $U$ are
isomorphic, the sizes of their corresponding branches are the same, so
by the same reasoning, $\nlbl{(U)}$ must also be the same
$\sz{\leftsub{(T)}}+1$st smallest value.
\end{solution}

\eparts

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

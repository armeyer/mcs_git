\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_rationals_are_countable}
  \pcomment{from: S09.cp3t}
  \pcomment{edited by ARM 10/10/09 and 2/12/11}
\end{pcomments}

\pkeywords{
  bijection
  rationals
  countable
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
  The rational numbers fill the space between integers, so a first
  thought is that there must be more of them than the integers, but
  it's not true.  In this problem you'll show that there are the same
  number of positive rationals as positive integers.  That is, the
  positive rationals are countable.

  \bparts
\iffalse

  \ppart Describe a bijection between all the integers $\integers$ and
  the nonnegative integers $\nngint$.

  \begin{solution}
One such bijection is defined by lining up all the integers and
    the nonnegative integers as follows:
\[\begin{array}{ccccccccl}
0 & 1 & -1 & 2 & -2 & 3 & -3 & 4 & \dots\\
0 & 1 & 2  & 3 & 4  & 5 & 6  & 7 & \dots
\end{array}\]
We can also define this bijection $f:\integers \to \integers^+$ by a specification rule
\[
f(n) = \begin{cases}
       -2n & \text{for } n\leq 0,\\
       2\abs{n} -1  & \text{for } n> 0.
       \end{cases}
\]

\end{solution}
\fi

\ppart\label{nbijnn} Define a bijection between the set
$\integers^+$ of positive integers, and the set $(\integers^+ \cross
\integers^+)$ of all pairs of positive integers:
\[\begin{array}{l}
(1,1), (1,2), (1,3), (1,4), (1,5), \dots\\
(2,1), (2,2), (2,3), (2,4), (2,5), \dots\\
(3,1), (3,2), (3,3), (3,4), (3,5), \dots\\
(4,1), (4,2), (4,3), (4,4), (4,5), \dots\\
(5,1), (5,2), (5,3), (5,4), (5,5), \dots\\

\qquad \vdots
\end{array}\]

\begin{staffnotes}
A hint will probably be needed: Suggest ``filtering for duplicates''
as on Problem~\bref{CP_countable_from_surj}.
\end{staffnotes}

\begin{solution}
Line up all the pairs by following successive upper-right to
lower-left diagonals along the top row.

That is, start with (1,1) which is an initial diagonal of length 1.
Then follow with the length 2 diagonal (1,2), (2,1), then the length 3
diagonal (1,3), (2,2), (3,1), then the length 4 diagonal (1,4), (2,3),
(3,2), (4,1), \dots.  So the line up would be
\[\begin{array}{cccccccccccl}
(1,1) & (1,2) & (2,1) & (1,3) & (2,2) & (3,1) & (1,4) & (2,3) & (3,2) & (4,1)& \dots\\
  1   & 2     & 3     & 4     & 5     & 6     & 7     & 8     & 9     & 10   & \dots
\end{array}\]

It's interesting that this bijection from $(\integers^+ \cross
\integers^+)$ to $\integers^+$ happens to have a simple formula.  The
pair $(k,m)$ is the $k$th element on the diagonal consisting of the
$k+m-1$ pairs whose sum is $k+m$.  The total number of elements in all
the preceding diagonals is
\[
0 + 1 + 2 + \cdots + (k+m-2) = (k+m-1)(k+m-2)/2,
\]
so the pair $(k,m)$ is the $(k+m-1)(k+m-2)/2 + k$th element in
the line-up.
\end{solution}

\ppart Conclude that the set $\rationals^+$ of all positive rational
numbers is \idx{countable}.

\begin{solution}
To show the positive rationals are countable, we want to show how to
line them up in a list.  To do this, start with a list of all pairs of
positive integers such as the one from part~\eqref{nbijnn}.  Then, going
from left to right, replace each pair $(m,n)$ by the positive rational
$r \eqdef m/n$, skipping pairs where $r$ has already appeared:
\[
1, 1/2, 2, 1/3, 3, 1/4, 2/3, 3/2, 4, \dots.
\]
This is now the desired list of the positive rationals.

\begin{staffnotes}
Some students may get stuck looking for a nice formula for the $n$th
positive rational in the list.  Warn them not to look for a formula,
just a \emph{procedure} to construct the list.
\end{staffnotes}

Another, indirect approach is to find surjective functions between
$\integers^+$ and $\rationals^+$ and back, and than appeal to the
Schr\"oder-Bernstein Theorem~\bref{S-B_thm}.

To begin, we have that
\begin{equation}\label{r+surjn}
\rationals^+ \surj \integers^+,
\end{equation}
since the identity function restricted to the positive integers does
the job.  Namely, $f: \rationals^+ \to \integers^+$ where
\[
f(r) \eqdef \begin{cases}
             r & \text{if $r$ is an integer},\\
             \text{undefined} & \text{otherwise},
            \end{cases}
\]
is a surjective function.

Also
\[
(\integers^+ \cross \integers^+) \surj \rationals^+
\]
since there is a simple surjective function $g:(\integers^+ \cross
\integers^+) \to \rationals^+$, namely,
\[
g(m,n) \eqdef  m/n.
\]
It follows from part~\eqref{nbijnn} that
\begin{equation}\label{nsurjr+}
\integers^+ \surj \rationals^+.
\end{equation}

Now~\eqref{r+surjn},~\eqref{nsurjr+}, and the Schr\"oder-Bernstein
Theorem~\bref{S-B_thm} imply
\[
\integers^+ \bij \rationals^+.
\]

\end{solution}

\begin{staffnotes}
If there's extra time, point out the previous approach to the team,
namely that by Schr\"oder-Bernstein, all they need show is that
$\integers^+ \surj \rationals^+$ and $\rationals^+ \surj \integers^+$.
Then suggest they try that.

\end{staffnotes}

\eparts

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

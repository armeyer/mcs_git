\documentclass[problem]{mcs}
\begin{pcomments}
  \pcomment{FP_unique_search_tree}
  \pcomment{part(a) overlaps PS_search1-n}
  \pcomment{subsumes MQ_isomorphic_search}
  \pcomment{ARM 10/24/17}
\end{pcomments}

\pkeywords{
  search_tree
  labels  
  subtrees
  }

\newcommand{\nlbla}[1]{\text{num}_{\text{alt}}{#1}}
\newcommand{\nlblsa}[1]{\text{nums}_{\text{alt}}{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}

\bparts

\ppart Edit the labels in this size 15 tree $T$ so it becomes a
search tree for the set of labels $\Zintv{1}{15}$.

\begin{center}
\begin{verbatim}
                        T
                       / \
                      /   \
                     /     \
                    /       \
                  A           B
                 / \         / \
                /   \       /   \
               /     \     /     \
              C       D   E       F
             / \     / \         / \
            /   \   /   \       /   \
           G     H I     J     K     L
                        / \
                       M   N
\end{verbatim}
\end{center}


\begin{solution}
\newpage
\begin{center}
\noindent
\begin{verbatim}
                        10
                       / \
                      /   \
                     /     \
                    /       \
                  4          12
                 / \         / \
                /   \       /   \
               /     \     /     \
              2       6   11      14 
             / \     / \         / \
            /   \   /   \       /   \
           1     3 5     8     13    15
                        / \
                       7   9
\end{verbatim}         
\end{center}
\end{solution}

\ppart For any recursive tree and set of labels, there is only one way
to assign labels to make the tree a search tree.  More precisely, let
$\nlbl{}: \rectr \to \reals$ be a labelling function on the recursive
binary trees, and suppose $T$ is a search tree under this
labelling.  Suppose that $\nlbla{}$ is another labelling and that
$T$ is also a search tree under $\nlbla{}$ for the \emph{same}
set of labels.  Prove by structural induction on the definition of
search tree \inbook{(Definition~\bref{defsearchtree})} that
\begin{equation}\tag{same}
\nlbl{(S)} = \nlbla{(S)}
\end{equation}
for all subtrees $S \in \subbrn{T}$.

\instatements{Reminder:

\begin{definition*}%\label{defsearchtree}
The Search trees $T \in \brnch$ are defined recursively as follows:

\inductioncase{Base case}: ($T \in \leafset$).  $T$ is a Search tree.

\inductioncase{Constructor case}: ($T \in \brnchng$).
If $\leftsub{(T)}$ and $\rightsub{(T)}$ are both Search trees, and
\[
\text{max}(\leftsub{(T)}) < \nlbl{(T)} < \text{min}(\rightsub{(T)}),
\]
then $T$ is a Search tree.
\end{definition*}
}

\begin{solution}

\begin{proof}
By structural induction on
\inbook{Definition~\bref{defsearchtree}}\inhandout{the definition} of
search tree, with induction hypothesis $P(T) \eqdef
\text{equation~(same)}$.

\inductioncase{Base case}: ($T \in \leafset$).  The set of labels of
$T$ under $\nlbl{}$ is the singleton set $\set{\nlbl{(T)}}$, and the
set of labels of $T$ under $\nlbla{}$ is the singleton set
$\set{\nlbla{(T)}}$.  Since the set of labels are the same
under each labelling, we have
\[
\nlbl{(T)} = \nlbla{(T)}.
\]
Since $T$ is the only subtree of $T$, we conclude that $P(T)$ holds in
this case.

\inductioncase{Constructor case}: ($T \in \brnchng$).  Since $T$ is a
search tree under $\nlbl{}$, the left branch $\leftsub{(T)}$ is a
search tree for the smallest $\sz{\leftsub{(T)}}$ labels in
$\nlbls{(T)}$, the label $\nlbl{(T)}$ must be the next largest label
in $\nlbls{(T)}$, and $\rightsub{(T)}$ is a search tree for the
remaining labels in $\nlbls{(T)}$.  Likewise, for the labelling
$\nlbla{}$.  But since $\nlbls{(T)}= \nlblsa{(T)}$, we conclude that
\begin{align*}
\nlbls{(\leftsub{(T)})}  & = \nlblsa{(\leftsub{(T)})},\\
\nlbl{(T)}             &=  \nlbla{(T)}, \\
\nlbls{(\rightsub{(T)})} & = \nlblsa{(\rightsub{(T)})}.
\end{align*}
By induction hypothesis $P(\leftsub{(T)})$, we have that
\[
\nlbl{(S)} = \nlbla{(S)}
\]
for all $S \in \subbrn{\leftsub{(T)}}$ and likewise $P(\rightsub{(T)})$
implies
\[
\nlbl{(S)} = \nlbla{(S)}
\]
for all $S \in \subbrn{\rightsub{(T)}}$.  Therefore
\[
\nlbl{(S)} = \nlbla{(S)}
\]
for all $S \in \subbrn{(T)}$, which proves $P(T)$.
\end{proof}
\end{solution}

\eparts

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput



\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_m_envelopes_WOP}
  \pcomment{from: S17.cp2w}
  \pcomment{CH, S14. Adapted from a question on stackexchange.}
  \pcomment{revised ARM 2/1/15, with staff notes added 2/8/15}
\end{pcomments}

\pkeywords{
  WOP
  envelopes
  dollars
  binary_representation
  power_of_2
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
You are given a series of envelopes, respectively containing $1, 2, 4,
\dots, 2^m$ dollars.  Define
\begin{quote}
\textbf{Property $m$}: For any nonnegative integer less than $2^{m+1}$,
there is a selection of envelopes whose contents add up to
\emph{exactly} that number of dollars.
\end{quote}
Use the Well Ordering Principle (WOP) to prove that Property $m$ holds
for all nonnegative integers $m$.

\hint Consider two cases: first, when the target number of dollars is
less than $2^m$ and second, when the target is at least $2^m$.

\begin{staffnotes}

\textbf{Pedagogical advice}: This is likely to be a challenging problem
for beginners who have only seen WOP (or induction) used to prove
algebraic formulas.  It's useful practice to have the team get a
complete solution written on their whiteboard using the WOP template.
(If someone brings up induction, confirm that induction would be a
standard approach, but we're focussing on WOP here and don't want to
be distracted by other approaches.)

You might get your team going by having them write out the WOP proof
template to be filled in, and then get them focussed on Case 1.

Students may be worried about how to invent this kind of split into
cases.  Tell them we don't expect them to be able to do that yet, but
now just want focus on using WOP to verify the claim.  Afterward, you
might try getting some team member to explain how binary numbers work,
and have the team consider how that would be relevant:

\textbf{Further explanation}: An easy way to see why this holds is to
think about $m$ digit binary numbers.  The binary representation of
the number of dollars contained in a selection of envelopes has a 1
for its $i$th digit iff the $i$th envelope is in the selection
(starting with an envelope numbered 0).  This gives a recipe for
finding a selection of envelopes whose contents add up to any given
$m$ digit binary number.

This is worth pointing out at some point, maybe before, or maybe
after, students work out the WOP proof.

The solution below can be understood as first finding a selection of
envelopes that fill in the low-order bits and then using (or
not using) the last envelope to fill in the high order bit.

Thinking about binary numbers also suggests an alternative approach to
the WOP proof based on first finding a selection for the high-order
bits and then filling in the low order bit with the first envelope.
Namely, let $k \eqdef \ceil{n/2}$ be the quotient of $n$ divided by 2.
This will be smaller than $2^{m_0}$, so Property $m_0-1$ implies that
some selection of the first $m_0-1$ envelopes adds up to $k$.
Replacing each envelope in this selection by the \emph{next} envelope
(that contains twice as many dollars) gives a selection adding up to
$2k$ that does not use the first envelope.  If $n=2k$, we're done, and
if $n = 2k+1$, then add the first envelope to the selection to get
$n$.
\end{staffnotes}

\begin{solution}
Let $C$ be the set of positive integers $m$ such that Property $m$ is
\emph{not} true, and assume for the sake of contradiction that $C$ is
non-empty.  Then by the Well Ordering Principle (WOP), $C$ has a
smallest element $m_0$.

The first thing to notice is that Property 0 holds, because the
nonnegative integers less than $2^{0+1}$ are just one and zero, which
we can always get by selecting or not selecting the single envelope
containg one dollar.

So $m_0$ must be greater than 0, and $m_0-1$ must be a nonnegative
integer.  The definition of $m_0$ now implies that Property $m_0-1$
must hold.

We will now prove that Property $m_0$ holds, contradicting the
definition of $m_0$.  To do this, we show how to find a selection of
envelopes whose contents add up to any nonnegative integer $n$ less
than $2^{m_0+1}$.

There are two cases:

\begin{enumerate}

\item $n < 2^{m_0}$.  Now since $2^{m_0} = 2^{(m_0-1) + 1}$ and
  Property $m_0-1$ holds, we can find a subset of the first $m_0-1$
  envelopes that add up to $n$.  We don't need to use the last
  envelope containing $\$2^{m_0}$.

\item $2^{m_0} \leq n$.  Since $n < 2^{m_0+1}$, we know $n - 2^{m_0} <
  2^{m_0}$.  Therefore by Case 1, there is a selection of the first
  $m_0-1$ envelopes that adds up to $n - 2^{m_0}$ dollars.  Now add
  the last envelope, which contains $2^{m_0}$ dollars, to this
  selection to obtain a selection that adds to $n$ dollars.
\end{enumerate}
Therefore, for any $n < 2^{m_0+1}$ we can find a selection of envelopes
whose contents add up to $n$ dollars.  This means that Property $m_0$
holds, contradicting the choice of $m_0$.

This contradition implies that $C$ must be empty, proving that
Property $m$ holds for all positive integers $m$.
\end{solution}

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

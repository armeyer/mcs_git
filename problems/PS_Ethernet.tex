\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{PS_ethernet}
  \pcomment{modified from S00 L23}
  \pcomment{overlaps with PS_immortal_probability}
  \pcomment{edited 4/29/14, 11/9/15, 12/8/15}
\end{pcomments}

\pkeywords{
 ethernet
 exponential_backoff
 probability
 expectation
 time to failure
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
%We've now learned enough probability to look at an interesting
%application of randomization in computer science. This is the math
%behind the paper you will read in 6.033.

A simple model for the classic ethernet communication protocol is that
some number of computers connect to a shared cable.  Anyone who wants
to talk to another computer broadcasts a message on the wire, hoping
the other computer will hear it.  The problem is that if \emph{more}
than one computer broadcasts at once, a \emph{collision} occurs that
garbles all messages we are trying to send.  The transmission only
works if \emph{exactly one} machine broadcasts at one time.

Suppose there are $n$ machines connected by an ethernet, and each
wants to broadcast a message.  Also suppose that time is divided into
a sequence of intervals, each of which is long enough for one message
broadcast.

%What we would like is for each machine to take one of the slots and
%use it to broadcast their message. All $n$ broadcasts can finish with
%$n$ time slots. There's one big problem with this approach: how do
%they decide who goes first? Note that they can't coordinate a
%strategy since they can't communication in the first place! Each
%computer needs to make its own decision about whether to broadcast or
%not. Some thought suggests a big problem: whatever algorithm is used
%by the various machines to decide whether to broadcast, they will all
%make the same decision! They will all broadcast, or all stay
%silent. Either way, we can't get a message through. The problem is
%symmetry: from every machine's perspective, the environment looks the
%same, so they all act the same.  One can prove (using invariants) that
%there is no (\em deterministic} way around this problem.  A simple way
%to get around this problem by breaking symmetry is \emph{randomization}.

In each time interval, each computer makes an independent decision to
broadcast with probability $p$.

\bparts

\ppart What is the probability that exactly one message gets through in a
given interval?  (Hint: consider the event $A_i$ that machine $i$ transmits
while no other machine does.)

\begin{solution}
\begin{equation}\label{pra_i}
\pr{A_i} = p(1-p)^{n-1}.
\end{equation}

Thus, since the events $A_i$ are disjoint, we have 
\begin{equation}\label{lguna_i}
\pr{\lgunion A_i} = \sum_{i=1}^n \pr{A_i} = np(1-p)^{n-1}.
\end{equation}
\end{solution}

\ppart What is the expected time it takes for machine $i$ to get a
message through?

\begin{solution}
This is just mean time to failure, where machine $i$ getting a message
through is the ``failure.''  So the answer is $1/P$, where $P \eqdef
\pr{A_i}$ as given by~\eqref{pra_i}.
\end{solution}

\ppart What value of $p$ (as a function of $n$) minimizes the expected
time for the network to successfully transmit some message?  Conclude
that the network can be expected to transmit a message after at most
three intervals.

\begin{solution}
We want to maximize the expression~\eqref{lguna_i} as a function of
$p$.  Differentiating the above expression with respect to $p$ and
setting the resulting derivative to zero gives the equation:
\begin{align*}
(1-p)^{n-1} - (n-1)p(1-p)^{n-2} &= 0 \\
               (1-p) - (n-1)p   &= 0 \\
                            p   &= \frac{1}{n}
\end{align*}

Plugging in the $1/n$ for $p$ in~\eqref{lguna_i}, we find the maximum
probability that some message gets through successfully is
\[
np(1-p)^{n-1} = \paren{1-\frac{1}{n}}^{n-1} \sim 1/e,
\]
so the minimized expected time is asymptotically equal to $e$, which
is less than 3.
\end{solution}

\eparts

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{FP_structural_induction_rational_composition}
  \pcomment{rewording of _S13 version}
  \pcomment{subsumed by CP_structural_induction_rational_composition}
  \pcomment{This is part(a) of CP_structural_induction_rational_composition}
  \pcomment{ARM 1/31/12}
  \pcomment{S15.mid2, F15.mid2}
  \pcomment{soln revised ARM, adamc 3/17/15, ARM revise 10/18/15}
\end{pcomments}

\pkeywords{
  structural_induction
  functions
  composition
  rational_function}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand{\RAF}{\ms{RAF}}

\begin{problem}

\begin{definition*}
The set $\RAF$ of \emph{rational functions} of one real variable is
the set of functions defined recursively as follows:

\inductioncase{Base cases:}
\begin{itemize}
\item The identity function, $\ide(r) \eqdef r$ for $r \in
  \reals$ (the real numbers), is an $\RAF$,
\item any constant function on $\reals$ is an $\RAF$.
\end{itemize}

\inductioncase{Constructor cases:}
If $f,g$ are $\RAF$'s, then so is
$f \circledast g$, where $\circledast$ is one of the operations
\begin{enumerate}%\label{RAF+*}
\item addition $+$,
\item multiplication $\cdot$ or
\item division $/$.
%\item the inverse function $f^{(-1)}$,\label{L:inversefunc}
%\item the composition $f \compose g$.\label{cmp}
\end{enumerate}
\end{definition*}

Prove by structural induction that $\RAF$ is closed under composition.
That is, using the induction hypothesis,
\[
P(h) \eqdef \forall g \in \RAF.\ h \compose g \in \RAF,
\]
prove that $P(h)$ holds for all $h \in \RAF$.  Make sure to indicate
explicitly
\begin{itemize}
\item each of the base cases, and
\item each of the constructor cases.
\end{itemize}

\hint One proof in terms of $\circledast$ covers all three cases.

\examspace[3.5in]

\begin{solution}
There is a basic identity connecting the sum and composition of
all real-valued functions $e,f,g$ of one variable:
  \[
    (e + f) \compose g = (e \compose g) + (f \compose g).
   \]
This equation follows from the definition of the composition and sum 
of functions.\footnote{Try proving this yourself before reading the
  following proof which follows almost automatically from the
  definitions:
\begin{align*}
[(e + f) \compose g](x)
 & = [e+f](g(x)) & \text{(by def of composition)}\\
 & =  e(g(x)) + f(g(x)) & (\text{since } [e+f](y) \eqdef e(y)+f(y))\\
 & = (e \compose g)(x) + (f \compose g)(x) & \text{(by def of composition)}\\
 & = [(e \compose g) + (f \compose g)](x) & (\text{since } a(x)+b(x) =[a+b](x)).
\end{align*}

It's worth stopping a moment to realize that the similar-looking
identity
\[
\textcolor{red}{
g \compose (e + f) = (g \compose e) + (g \compose f)
}
\]
is altogether \textbf{false}.  }  Corresponding identities hold for
the other constructor operations for $\RAF$, namely,
  \begin{equation}\label{ecdfcomp}
    (e \circledast f) \compose g = (e \compose g) \circledast (f \compose g),
  \end{equation}
for all real-valued functions $e,f,g$ of one variable.  This is the
key observation on which the Constructor case of the proof hinges.

\begin{proof}
  \inductioncase{Base case}: ($h = \ide_\reals$).  $P(h)$ holds
  because $\ide_\reals \compose g = g$ for all real-valued functions
  $g$, and so $h \in \RAF$ for all $g \in \RAF$.

  \inductioncase{Base case}: ($h = \text{a constant-function, } c$).
  $P(h)$ holds because $c \compose g = c$ for all real-valued
  functions $g$, and $c \in \RAF$ by definition.
  
  \inductioncase{Constructor cases}: We are given $h = e \circledast
  f$ for $e, f \in \RAF$.  We may assume by structural induction that
  $P(e)$ and $P(f)$ both hold, and must prove $P(h)$.
\iffalse
, that is
  \[
  \forall g \in \RAF.\, h \compose g \in \RAF.
  \]
\fi

Now by~\eqref{ecdfcomp},
\[
h \compose g = (e \compose g) \circledast (f \compose g).
\]
Also, if $g \in \RAF$, then $(e \compose g)$ is in $\RAF$ by induction
hypothesis $P(e)$.  Likewise, $(f \compose g)$ in $\RAF$.

Therefore
\[
(e \compose g) \circledast (f\compose g) \in \RAF
\]
by the Constructor rules for $\RAF$.  That is, $h \compose g \in
\RAF$.

This proves $P(h)$ for all three of the constructor cases, which
completes the proof by structural induction.  We conclude
   \[
   \forall h \in \RAF.\, P(h).
   \]
\end{proof}

\end{solution}

\end{problem}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

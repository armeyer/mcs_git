\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{MQ_red_blue_machine}
  \pcomment{ARM 10/8/13}
\end{pcomments}

\pkeywords{
  state_machines
  derived_variable
  strictly_decreasing
  nonnegative
  termination
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
There is a bucket containing more blue balls than red balls.  As long
as there are more blues than reds, any one of the following rules may
be applied to add and/or remove balls from the bucket:

\begin{enumerate}
\item[(i)] Add a red ball.
  
\item[(ii)] Remove a blue ball.

\item[(iii)] Add two reds and one blue.

\item[(iv)] Remove two blues and one red.
\end{enumerate}

\bparts

\ppart Starting with 10 reds and 16 blues, what is the largest number
of balls the bucket will contain by applying these rules?\hfill\examrule[0.6in]

\examspace[0.2in]
\begin{solution}
\[
\mathbf{44} = 22 \text{ red balls} + 22 \text{ blue balls}.
\]

By applying rule (iii) six times.
\end{solution}
\eparts

Let $b$ be the number of blue balls and $r$ be the number of red balls
in the bucket at any given time.

\bparts

\ppart\label{b-rge0} Prove that $b - r \geq 0$ is a preserved invariant of the process
of adding and removing balls according to rules (i)--(iv).

\examspace[3.0in]

\begin{solution}
If $b\leq r$, then no rule applies, so $b-r \geq 0$ is vacuously
preserved.  If a rule applies, we must have $b-r>0$.  Since each rule
reduces the difference of $b$ and $r$ by one, we have $b-r \geq 0$
after application of a rule.  So again $b-r \geq 0$ is preserved.
\end{solution}

\ppart Find a nonnegative integer-valued derived variable that is
strictly decreasing, and use it to prove that no matter how many balls
the bucket contains, repeatedly applying rules (i)--(iv) will
eventually lead to a state where no further rule can be applied.

\begin{solution}
It is easy to verify that $b - r$ is such a derived variable.  For
example, applying rule (iii) takes $(b,r)$ to $(b+1, r+2)$ and
\[
b-r > b-r - 1 = (b+1)-(r+2).
\]
Also, $b-r$ is also nonnegative by part~\eqref{b-rge0}.  It follows
that starting in state $(b,r)$, the rules can be applied at most $b-r$
times.
\end{solution}

\eparts
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

\chapter{Mathematical Data Types}\label{data_chap}

\newcommand{\inchrg}{\textit{Chrg}}
\newcommand{\facdom}{\text{Fac}}
\newcommand{\subnums}{\text{SubNums}}
\newcommand{\introsub}{\text{Intro}}

We have assumed that you've already been introduced to the concepts of
sets, sequences, and functions, and we've used them informally several
times in previous sections.  In this chapter, we'll now take a more
careful look at these mathematical data types.  We'll quickly review
the basic definitions, add a few more such as ``images'' and ``inverse
images'' that may not be familiar, and end the chapter with some
methods for comparing the sizes of sets.

\begin{editingnotes}
Propositions of the sort we've considered so far are good for
reasoning about individual statements, but not so good for reasoning
about a collection of objects.  Let's first review a couple
mathematical tools for grouping objects and then extend our logical
language to cope with such collections.
\end{editingnotes}

\section{Sets}
Informally, a \term{set} is a bunch of objects, which are called the
\emph{elements} of the set.  The elements of a set can be just about
anything: numbers, points in space, or even other sets.  The conventional
way to write down a set is to list the elements inside curly-braces.  For
example, here are some sets:

\begin{align*}
%\nngint & = \set{0, 1, 2, 3, \dots} & \text{the} \text{nonnegative integers} \\
A & =  \set{\text{Alex}, \text{Tippy}, \text{Shells}, \text{Shadow}} & \text{dead pets} \\
B & =  \set{\text{red}, \text{blue}, \text{yellow}} & \text{primary colors} \\
C & =  \set{ \set{a, b}, \set{a, c}, \set{b, c}} & \text{a set of sets}
\end{align*}
This works fine for small finite sets.  Other sets might be defined by
indicating how to generate a list of them:
\begin{align*}
D & \eqdef  \set{1,2,4,8,16,\dots} & \text{the powers of 2}
\end{align*}

The order of elements is not significant, so $\set{x, y}$ and $\set{y,
  x}$ are the same set written two different ways.  Also, any object
is, or is not, an element of a given set---there is no notion of an
element appearing more than once in a set.\footnote{It's not hard to
  develop a notion of \emph{multisets}%
\index{set!multiset} 
in which elements can occur more than once, but multisets are not ordinary sets and 
are not covered in this text.}  So, writing
$\set{x,x}$ is just indicating the same thing twice:
that $x$ is in the set.  In particular, $\set{x,x} = \set{x}$.

The expression ``$e \in S$'' asserts that $e$ is an element of set $S$.  For
example, $32 \in D$ and $\text{blue} \in B$, but $\text{Tailspin}
\not\in A$---yet.

Sets are simple, flexible, and everywhere.  You'll find
some set mentioned in nearly every section of this text.

\subsection{Some Popular Sets}

Mathematicians have devised special symbols to represent some common
sets.

\begin{center}
\begin{tabular}{lll}
\textbf{symbol} & \textbf{set} & \textbf{elements} \\
$\emptyset$ & the empty set & \text{none}\\
$\nngint$ & nonnegative integers & $\set{0, 1, 2, 3, \ldots}$ \\
$\integers$ & integers & $\set{\ldots, -3, -2, -1, 0, 1, 2, 3, \ldots}$ \\
$\rationals$ & rational numbers & $\frac{1}{2},\ -\frac{5}{3},\ 16,\ \text{etc.}$ \\
$\reals$ & real numbers & $\pi,\ e,\ -9,\ \sqrt{2},\ \text{etc.}$ \\
$\complexes$ & complex numbers & $i,\ \frac{19}{2},\ \sqrt{2} - 2i,\ \text{etc.}$
\end{tabular}
\end{center}
A superscript ``$^+$'' restricts a set to its positive elements; for
example, $\reals^+$ denotes the set of positive real numbers.  Similarly,
$\integers^-$ denotes the set of negative integers.

\subsection{Comparing and Combining Sets}

The expression $S \subseteq T$ indicates that set $S$ is a
\emph{subset}\index{set!subset|textbf} of set $T$, which means that
every element of $S$ is also an element of $T$.  For example,
$\nngint \subseteq \integers$ because every nonnegative integer is
an integer; $\rationals \subseteq \reals$ because every rational
number is a real number, but $\complexes \not\subseteq \reals$ because
not every complex number is a real number.

As a memory trick, think of the ``$\subseteq$'' symbol as like the ``$\leq$''
sign with the smaller set or number on the left-hand side.  Notice
that just as $n \leq n$ for any number $n$, also $S \subseteq S$ for
any set $S$.

There is also a relation $\subset$ on sets like the ``less than''
relation $<$ on numbers.  $S \subset T$ means that $S$ is a subset of
$T$, but the two are \emph{not} equal.  So just as $n \not< n$ for
every number $n$, also $A \not\subset A$, for every set $A$.  ``$S
\subset T$'' is read as ``$S$ is a \term{strict subset} of $T$.''

There are several basic ways to combine\index{set!combining
  sets|textbf} sets.  For example, suppose
\begin{align*}
X & \eqdef \set{1, 2, 3}, \\
Y & \eqdef \set{2, 3, 4}.
\end{align*}

\begin{definition}
\mbox{}

\begin{itemize}
\item The \term{union} of sets $A$ and $B$, denoted $A \union B$,
  includes exactly the elements appearing in $A$ or $B$ or both.  That is,
\[
x \in A \union B\quad \QIFF\quad x \in A \QOR x \in B.
\]
So $X \union Y = \set{1, 2, 3, 4}$.

\item The \term{intersection} of $A$ and $B$, denoted $A \intersect
  B$, consists of all elements that appear in \textit{both} $A$ and
  $B$.  That is,
\[
x \in A \intersect B\quad \QIFF\quad x \in A \QAND x \in B.
\]
So, $X \intersect Y = \set{2, 3}$.

\item The \term{set difference} of $A$ and $B$, denoted $A-B$,
  consists of all elements that are in $A$, but not in $B$.  That is,
\[
x \in A - B\quad \QIFF\quad  x \in A \QAND x \notin B.
\]
So, $X -  Y = \set{1}$ and $Y - X = \set{4}$.

\end{itemize}
\end{definition}

Often all the sets being considered are subsets of a known domain
of discourse $D$.  Then for any subset $A$ of $D$, we define
$\bar{A}$ to be the set of all elements of $D$ \textit{not} in $A$.
That is,
\[
\bar{A} \eqdef D-A.
\]
The set $\bar{A}$ is called the \emph{complement}
\index{complement|see set} \index{set!complement|textbf} of $A$.  So
\[
\bar{A} = \emptyset\ \QIFF\ A = D.
\]

For example, if the domain we're working with is the integers, the
complement of the nonnegative integers is the set of negative integers:
\[
\bar{\nngint} = \integers^-.
\]

We can use complement to rephrase subset in terms of equality
\[
A \subseteq B \text{  is equivalent to  } A \intersect \bar{B} = \emptyset.
\]

\iffalse
It can be helpful to rephrase properties of sets using complements.  For
example, two sets $A$ and $B$ are said to be \term{disjoint} iff they
have no elements in common, that is, $A \intersect B = \emptyset$.  This
is the same as saying that $A$ is a subset of the complement of $B$, that
is, $A \subseteq \bar{B}$.
\fi

\subsection{Power Set}

The set of all the subsets of a set $A$ is called the \emph{power
  set}%
\index{set!power set|textbf} 
$\power(A)$ of $A$.  So
\[
B \in \power(A)\quad  \QIFF\quad  B \subseteq A.
\]
For example, the elements of $\power(\set{1, 2})$ are $\emptyset,
\set{1}, \set{2}$ and $\set{1, 2}$.

More generally, if $A$ has $n$ elements, then there are $2^n$ sets in
$\power(A)$---see Theorem~\ref{powset_fincard}.  For this reason,
some authors use the notation $2^A$ instead of $\power(A)$.

\subsection{Set Builder Notation}\label{set_builder_sec}

An important use of predicates is in%
\index{set!set builder notation} 
\emph{set builder notation}.  We'll
often want to talk about sets that cannot be described very well by
listing the elements explicitly or by taking unions, intersections,
etc., of easily described sets.  Set builder notation often comes to the
rescue.  The idea is to define a \emph{set} using a \emph{predicate};
in particular, the set consists of all values that make the predicate
true.  Here are some examples of set builder notation:

\begin{align*}
A & \eqdef \set{n \in \nngint \suchthat \text{$n$ is a prime and $n =
    4k+1$ for some integer $k$}}, \\
B & \eqdef \set{x \in \reals \suchthat x^3 - 3 x + 1 > 0}, \\
C & \eqdef \set{a + b i \in \complexes \suchthat a^2 + 2 b^2 \leq 1},\\
D & \eqdef \set{L \in \text{books} \suchthat L\text{ is cited in this text}}.
\end{align*}

The set $A$ consists of all nonnegative integers $n$ for which the
predicate
\begin{center}
``$n$ is a prime and $n = 4k+1$ for some integer $k$''
\end{center}
is true.  Thus, the smallest elements of $A$ are:
\[
5, 13, 17, 29, 37, 41, 53, 61, 73, \dots.
\]
Trying to indicate the set $A$ by listing these first few elements
wouldn't work very well; even after ten terms, the pattern is not
obvious.  Similarly, the set $B$ consists of all real numbers $x$ for
which the predicate
\[
x^3 - 3x + 1 > 0
\]
is true.  In this case, an explicit description of the set $B$ in
terms of intervals would require solving a cubic equation.  Set $C$
consists of all complex numbers $a + b i$ such that:
\[
a^2 + 2 b^2 \leq 1
\]
This is an oval-shaped region around the origin in the complex plane.
Finally, the members of set $D$ can be determined by filtering out
journal articles in from the list of references in the
Bibliography~\ref{biblabel}.

\subsection{Proving Set Equalities}\label{set_equality_sec}

Two sets are defined to be equal if they have exactly the same
elements.  That is, $X = Y$ means that $z \in X$ if and only if $z \in
Y$, for all elements $z$.\footnote{This is actually the first of the
  ZFC axioms%
\index{axiom!ZFC axioms!axiom of extensionality} 
for set theory mentioned at the end of
  Section~\ref{axiom_method_sec} and discussed further in
  Section~\ref{ZFC_sec}.}  So, set equalities can be formulated and
proved as ``iff'' theorems.  For example:

\begin{theorem}\label{thm:intersect-distributivity}[\emph{Distributive Law} for Sets]%
\index{Distributive Law!sets}
Let $A$, $B$ and $C$ be sets.  Then:
\begin{equation}\label{set-distrib}
A \intersect (B \union C) = (A \intersect B) \union (A \intersect C)
\end{equation}
\end{theorem}

\begin{proof}
The equality~\eqref{set-distrib} is equivalent to the assertion that
\begin{equation}\label{set-distrib-z}
  z \in A \intersect (B \union C) \qiff z \in (A \intersect B)
  \union (A \intersect C)
\end{equation}
for all $z$.  Now we'll prove~\eqref{set-distrib-z} by a chain of iff's.

Now we have
\begin{align*}
\lefteqn{z \in A \intersect (B \union C)}\\
& \qiff (z \in A) \QAND (z \in B \union C) & \text{(def of $\intersect$)}\\
& \qiff (z \in A) \QAND (z \in B \QOR z \in C)
                & \text{(def of $\union$)}\\
& \qiff (z \in A \QAND z \in B) \QOR (z \in A \QAND z \in C)
                & \text{(\QAND\ distributivity~\eqref{distand})}\\
& \qiff (z \in A \intersect B) \QOR (z \in A \intersect C)
                & \text{(def of $\intersect$)}\\
& \qiff z \in (A \intersect B) \union (A \intersect C)
                & \text{(def of $\union$)}
\end{align*}

\end{proof}
  
Of course there are lots of ways to prove such set equality formulas,
but we emphasize this chain-of-\QIFF's approach because it illustrates
a general method.  You can \emph{automate} proving any set equality
involving $\union, \intersect, -$ and complement by reducing
verification of the set equality into checking validity of a
corresponding propositional equivalence.  We know validity can be
checked automatically in lots of ways, for example by truth table or
algebra.

As a further example, from De Morgan's Law~\eqref{DeMQAND} for
propositions
\[
\QNOT(P \QAND Q)  \text{  is equivalent to  } \bar{P} \QOR \bar{Q}
\]
we can derive (Problem~\ref{CP_set_DeMorgan}) a corresponding De
Morgan's Law for set equality:
\begin{equation}\label{set-demorgan}
\bar{A \intersect B} = \bar{A} \union \bar{B}.
\end{equation}

In fact, if a set equality is not valid, this approach can also be
used to find a simple counter-example
(Problem~\ref{PS_set_identity_counterexample}).

Despite this correspondence between set and propositional formulas,
it's important not to confuse propositional with set operations.  For
example, if $X$ and $Y$ are sets, then it is wrong to write ``$X \QAND
Y$'' instead of ``$X \intersect Y$.''  Applying $\QAND$ to sets will
cause your compiler---or your grader---to throw a type error, because
an operation that is supposed to be applied to truth values has been
applied to sets.  Likewise, if $P$ and $Q$ are propositions, then it
is a type error to write ``$P \union Q$'' instead of ``$P \QOR Q$.''

\iffalse
Although the basic set operations and propositional connectives are
similar, it's important not to confuse one with the other.  For
example, $\union$ resembles $\QOR$, and in fact was defined directly
in terms of $\QOR$:
\[
x \in A \union B  \text{  is equivalent to  } (x \in A\ \QOR\ x \in B).
\]
Similarly, $\intersect$ resembles $\QAND$, and complement resembles $\QNOT$.

\[
x \in A \intersect B  \text{  is equivalent to  } x \in A\ \QAND\ x \in B,
\]
and
\[
x \in \bar{A}  \text{  is equivalent to  } \QNOT(x \in A).
\]

But if $A$ and $B$ are sets, writing $A\ \QAND\ B$ is a type-error,
since $\QAND$ is an operation on truth-values, not sets.  Similarly,
if $P$ and $Q$ are propositional variables, writing $P \union Q$ is
another type-error.
\fi


\begin{problems}

\practiceproblems
\pinput{TP_Power_Sets}
\pinput{TP_basic_set_formulas}

\classproblems
\pinput{CP_proving_basic_set_identity}
\pinput{CP_distribute_union_over_intersection}
\pinput{CP_set_DeMorgan}
\pinput{CP_powerset_union}
\pinput{CP_subset_take_away}

\homeworkproblems
\pinput{PS_set_union}
\pinput{PS_distributive-law-for-sets-by-WOP}
\pinput{PS_set_identity_counterexample}

\examproblems
\pinput{MQ_sets_to_membership_no_intro}
\pinput{MQ_sets_to_membership_no_intro-afternoon}
\pinput{FP_demorgan_set_iff}

\end{problems}

\section{Sequences}\label{seq_sec}

Sets provide one way to group a collection of objects.  Another way is
in a \term{sequence}, which is a list of objects called its
\emph{components}, members, or elements.  Short sequences are commonly
described by listing the elements between parentheses; for example,
the sequence $(a, b, c)$ has three components.  It would also be
referred to as a three element sequence or a sequence of length three.
These phrases are all synonyms---sequences are so basic that they
appear everywhere and there are a lot of ways to talk about them.

While both sets and sequences perform a gathering role, there are
several differences.
\begin{itemize}

\item The elements of a set are required to be distinct, but elements in a
sequence can be the same.  Thus, $(a, b, a)$ is a valid sequence of length
three, but $\set{a, b, a}$ is a set with two elements, not three.

\item The elements in a sequence have a specified order, but the
  elements of a set do not.  For example, $(a, b, c)$ and $(a, c, b)$
  are different sequences, but $\set{a, b, c}$ and $\set{a, c, b}$ are
  the same set.

\item Texts differ on notation for the \emph{empty sequence};%
  \index{sequence!empty sequence} we use $\emptystring$ for the empty
  sequence.
\end{itemize}

The product operation is one link between sets and sequences.  A
\term{Cartesian product} of sets, $S_1 \cross S_2 \cross \cdots \cross
S_n$, is a new set consisting of all sequences where the first
component is drawn from $S_1$, the second from $S_2$, and so forth.
Length two sequences are called \emph{pairs}.\footnote{Some texts call
  them \emph{ordered pairs}.}  For example, $\nngint \cross
\set{a,b}$ is the set of all pairs whose first element is a
nonnegative integer and whose second element is an $a$ or a $b$:
\[
\nngint \cross \set{a,b}
    = \set{(0,a), (0,b), (1,a), (1,b), (2,a), (2, b), \dots}
\]
A product of $n$ copies of a set $S$ is denoted $S^n$.  For example,
$\set{0, 1}^3$ is the set of all $3$-bit sequences:
\[
\set{0, 1}^3 = \set{ (0,0,0), (0,0,1), (0,1,0), (0,1,1),
                     (1,0,0), (1,0,1), (1,1,0), (1,1,1) }
\]

\begin{problems}

\homeworkproblems
\pinput{PS_disjoint_cartesian_products}
\pinput{PS_bogus_set_equality_proof}
\end{problems}


\section{Functions}\label{funcsubsec}

%\index{function|seealso{binary relation}} 

\subsection{Domains and Images}

A \term{function} assigns an element of one set, called the
\term{domain}, to an element of another set, called the
\term{codomain}.  The notation
\[
f: A \to B
\]
indicates that $f$ is a function with domain $A$ and codomain $B$.  The
familiar notation ``$f(a) = b$'' indicates that $f$ assigns the element $b
\in B$ to $a$.  Here $b$ would be called the \term*{value} of $f$ at
\term*{argument} $a$.

Functions are often defined by formulas, as in:
\[
f_1(x) \eqdef \frac{1}{x^2}
\]
where $x$ is a real-valued variable, or
\[
f_2(y,z) \eqdef y\mathtt{10}yz
\]
where $y$ and $z$ range over binary strings, or
\[
f_3(x, n) \eqdef \text{ the length $n$ sequence } \underbrace{(x, \dots, x)}_{n\ x\text{'s}}
\]
where $n$ ranges over the nonnegative integers.

A function with a finite domain could be specified by a table that shows
the value of the function at each element of the domain.  For example, a function
$f_4(P,Q)$ where $P$ and $Q$ are propositional variables is specified by:
\[\begin{array}{|cc|c|}
\hline
P & Q & f_4(P,Q)\\
\hline \true & \true & \true\\
\hline \true & \false & \false\\
\hline \false & \true & \true\\
\hline \false & \false & \true\\
\hline
\end{array}\]
Notice that $f_4$ could also have been described by a formula:
\[
f_4(P,Q)  \eqdef [P \QIMPLIES Q].
\]

A function might also be defined by a procedure for computing its value at
any element of its domain, or by some other kind of specification.  For
example, define $f_5(y)$ to be the length of a left to right search of the
bits in the binary string $y$ until a \texttt{1} appears, so
\begin{eqnarray*}
f_5(0010) & = &  3,\\
f_5(100)  & = & 1,\\
f_5(0000) & \text{is} & \text{undefined}.
\end{eqnarray*}

Notice that $f_5$ does not assign a value to any string of just
\texttt{0}'s.  This illustrates an important fact about functions:
they need not assign a value to every element in the domain.  In fact
this came up in our first example $f_1(x)=1/x^2$, which does not
assign a value to $0$.  So in general, functions may be \emph{partial%
  \index{function!partial} functions}, meaning that there may be
domain elements for which the function is not defined.  The set of
domain elements for which a function is defined is called the
\emph{support} \index{function!support} of the function.  If a
function assigns a value to every element of its domain, that is, its
support equals its domain, it is called a \emph{total
  \index{function!total} function}.

It's often useful to find the set of values a function takes when applied
to the elements in \emph{a set} of arguments.  So if $f:A \to B$, and $S$
is a subset of $A$, we define $f(S)$ to be the set of all the values that
$f$ takes when it is applied to elements of $S$.  That is,
\[
f(S) \eqdef \set{b \in B \suchthat f(s) = b \text{ for some } s
  \in S}.
\]
For example, if we let $[r,s]$ denote set of numbers in the
interval from $r$ to $s$ on the real line, then $f_1([1,2]) =
[1/4,1]$.

For another example, let's take the ``search for a \texttt{1}''
function $f_5$.  If we let $X$ be the set of binary words which
start with an even number of \texttt{0}'s followed by a
\texttt{1}, then $f_5(X)$ would be the odd nonnegative integers.

Applying $f$ to a set $S$ of arguments is referred to as
\hyperdef{mapping}{pointwise}{``applying $f$ \term{pointwise} to
  $S$''}, and the set $f(S)$ is referred to as the \emph{image}%
\index{image} of $S$ under $f$.\footnote{There is a picky distinction
  between the function $f$ which applies to elements of $A$ and the
  function which applies $f$ pointwise to subsets of $A$, because the
  domain of $f$ is $A$, while the domain of pointwise-$f$ is
  $\power(A)$.  It is usually clear from context whether $f$ or
  pointwise-$f$ is meant, so there is no harm in overloading the
  symbol $f$ in this way.}  The set of values that arise from applying
$f$ to all possible arguments is called the \term{range} of $f$.  That
is,
\[
\range{f} \eqdef f(\domain{f}).
\]
Some authors refer to the codomain as the range of a function, but
they shouldn't.  The distinction between the range and codomain will
be important later in Sections~\ref{mappingrule_sec} when we
relate sizes of sets to properties of functions between them.

\subsection{Function Composition}\label{func_compose_subsec}

Doing things step by step is a universal idea.  Taking a walk is a literal
example, but so is cooking from a recipe, executing a computer program,
evaluating a formula, and recovering from substance abuse.

Abstractly, taking a step amounts to applying a function, and going step
by step corresponds to applying functions one after the other.  This is
captured by the operation of \emph{composing}%
\index{functions!composition|textbf}
functions.  Composing the
functions $f$ and $g$ means that first $f$ is applied to some argument,
$x$, to produce $f(x)$, and then $g$ is applied to that result to produce
$g(f(x))$.

\begin{definition}\label{func_compose_def}
  For functions $f:A \to B$ and $g:B \to C$, the \emph{composition},
  $g \compose f$, of $g$ with $f$ is defined to be the function
  from $A$ to $C$ defined by the rule:
\begin{displaymath}
(g \compose f)(x) \eqdef g(f(x)),
\end{displaymath}
for all $x \in A$.
\end{definition}

Function composition is familiar as a basic concept from elementary
calculus, and it plays an equally basic role in discrete mathematics.

\section{Binary Relations}\label{rel_sec}

\emph{Binary relations} define relations between two objects.  For
example, ``less-than'' on the real numbers relates every real number $a$
to a real number $b$, precisely when $a < b$.  Similarly, the subset
relation relates a set $A$ to another set $B$ precisely when $A
\subseteq B$.  A function $f:A \to B$ is a special case of binary relation
in which an element $a \in A$ is related to an element $b \in B$ precisely
when $b = f(a)$.

In this section we'll define some basic vocabulary and properties of binary
relations.

%\hyperdef{func}{rel}
\begin{definition}\label{reldef}
A \term{binary relation}%
\index{relation|see{binary relation}} 
$R$ consists of a set $A$, called the
\emph{domain}%
\index{domain} 
of $R$, a set $B$ called the
\emph{codomain}%
\index{codomain} 
of $R$, and a subset of $A \cross B$ called the
\emph{graph of $R$}.
\end{definition}

A relation whose domain is $A$ and codomain is $B$ is said to be
``between $A$ and $B$'', or ``from $A$ to $B$.''  As with functions,
we write $R: A \to B$ to indicate that $R$ is a relation from $A$ to
$B$.  When the domain and codomain are the same set $A$ we simply
say the%
\index{binary relation!relation on a set}%
\index{relation|see{binary relation}} 
relation is ``on $A$.''  It's common
to use ``$a \mrel{R} b$'' to mean that the pair $(a,b)$ is in the
graph of $R$.\footnote{Writing the relation or operator symbol between
  its arguments is called \emph{infix notation}.  Infix expressions
  like ``$m < n$'' or ``$m + n$'' are the usual notation used for
  things like the less-then relation or the addition operation rather
  than {prefix notation} like ``$<(m,n)$'' or ``$+(m,n)$.''}

Notice that Definition~\ref{reldef} is exactly the same as the definition
in Section~\ref{funcsubsec} of a \emph{function}, except that it doesn't
require the functional condition that, for each domain element $a$, there
is \emph{at most} one pair in the graph whose first coordinate is $a$.  As
we said, a function is a special case of a binary relation.

\begin{editingnotes}
A better example would be nice here, especially if it led to
persuasive use of relational queries using set operations and
composition, maybe along the lines of Problem\ref{CP_web_search}.
Def of relational composition would have to moved here from
Section~\ref{relation_compose_subsec} along with
Problem~\ref{PS_relation_matrices}.
\end{editingnotes}

The ``in-charge of'' relation $\inchrg$ for MIT in Spring '10 subjects
and instructors is a handy example of a binary relation.  Its domain
$\facdom$ is the names of all the MIT faculty and instructional staff,
and its codomain is the set $\subnums$ of subject numbers in the
Fall '09--Spring '10 MIT subject listing.  The graph of $\inchrg$ contains
precisely the pairs of the form
\[
(\ang{\text{instructor-name}}, \ang{\text{subject-num}})
\]
such that the faculty member named $\ang{\text{instructor-name}}$ is in
charge of the subject with number $\ang{\text{subject-num}}$ that was
offered in Spring '10.  So $\graph{\inchrg}$ contains pairs like
\begin{equation}\label{incharge-pairs}
\begin{array}{ll}
  (\texttt{T. Eng},     & \texttt{6.UAT})\\
  (\texttt{G. Freeman}, & \texttt{6.011})\\
  (\texttt{G. Freeman}, & \texttt{6.UAT})\\
  (\texttt{G. Freeman}, & \texttt{6.881})\\
  (\texttt{G. Freeman}, & \texttt{6.882})\\
  (\texttt{J. Guttag},  & \texttt{6.00})\\
  (\texttt{A. R. Meyer}, & \texttt{6.042})\\
  (\texttt{A. R. Meyer}, & \texttt{18.062})\\
  (\texttt{A. R. Meyer}, & \texttt{6.844})\\
  (\texttt{T. Leighton}, & \texttt{6.042})\\
  (\texttt{T. Leighton}, & \texttt{18.062})\\
  \qquad \vdots
\end{array}
\end{equation}

\iffalse
This is a surprisingly complicated relation: Meyer is in charge of
subjects with three numbers.  Leighton is also in charge of subjects with
two of these three numbers---because the same subject, Mathematics for
Computer Science, has two numbers: 6.042 and 18.062, and Meyer and
Leighton are co-in-charge of the subject.  Freeman is in-charge of even
more subjects numbers (around 20), since as Department Education Officer,
he is in charge of whole blocks of special subject numbers.  Some
subjects, like 6.844 and 6.00 have only one person in-charge.  Some
faculty, like Guttag, are in charge of only one subject number, and no one
else is co-in-charge of his subject, 6.00.
\fi

Some subjects in the codomain $\subnums$ do not appear among this
list of pairs---that is, they are not in $\range{\inchrg}$.  These are
the Fall term-only subjects.  Similarly, there are instructors in the
domain $\facdom$ who do not appear in the list because they are not
in charge of any Spring term subjects.

\subsection{Relation Diagrams}\label{leq1in_sec}
Some standard properties of a relation can be visualized in terms of a
diagram.  The diagram for a binary relation $R$ has points corresponding
to the elements of the domain appearing in one column (a very long column if
$\domain{R}$ is infinite).  All the elements of the codomain appear in
another column which we'll usually picture as being to the right of the
domain column.  There is an arrow going from a point $a$ in the
left-hand, domain column to a point $b$ in the right-hand, codomain
column, precisely when the corresponding elements are related by $R$.  For
example, here are diagrams for two functions:

\begin{center}
\begin{tabular}{ccc}
\unitlength = 2pt
\begin{picture}(50,60)(-10,-5)
\thinlines
\put(-5,50){\makebox(0,0){$A$}}
  \put(35,50){\makebox(0,0){$B$}}
\put(-5,40){\makebox(0,0){a}}
  \put(0,40){\vector(1,0){28}}
  \put(35,40){\makebox(0,0){1}}
\put(-5,30){\makebox(0,0){b}}
  \put(0,30){\vector(3,-1){28}}
  \put(35,30){\makebox(0,0){2}}
\put(-5,20){\makebox(0,0){c}}
  \put(0,20){\vector(3,-1){28}}
  \put(35,20){\makebox(0,0){3}}
\put(-5,10){\makebox(0,0){d}}
  \put(0,10){\vector(3,2){28}}
  \put(35,10){\makebox(0,0){4}}
\put(-5,0){\makebox(0,0){e}}
  \put(0,0){\vector(3,2){28}}
\end{picture}

& \hspace{0.5in} &

\unitlength = 2pt
\begin{picture}(50,60)(-10,-5)
\thinlines
\put(-5,50){\makebox(0,0){$A$}}
  \put(35,50){\makebox(0,0){$B$}}
\put(-5,40){\makebox(0,0){a}}
  \put(0,40){\vector(1,0){28}}
  \put(35,40){\makebox(0,0){1}}
\put(-5,30){\makebox(0,0){b}}
  \put(0,30){\vector(3,-1){28}}
  \put(35,30){\makebox(0,0){2}}
\put(-5,20){\makebox(0,0){c}}
  \put(0,20){\vector(3,-2){28}}
  \put(35,20){\makebox(0,0){3}}
\put(-5,10){\makebox(0,0){d}}
  \put(0,10){\vector(3,2){28}}
  \put(35,10){\makebox(0,0){4}}
\put(35,0){\makebox(0,0){5}}
\end{picture}

\end{tabular}
\end{center}

Being a function is certainly an important property of a binary relation.
What it means is that every point in the domain column has \emph{at most
  one arrow coming out of it}.  So we can describe being a function as the
``$\le 1\ \text{arrow out}$'' property.  There are four more
standard properties of relations that come up all the time.  Here are all
five properties defined in terms of arrows:

\begin{definition}\label{archery-def}
A binary relation $R$ is:
\begin{itemize}

\item a \emph{function}%
\index{function}
when it has the $[\le 1\ \text{arrow
    \textbf{out}}]$ property.

\item  \emph{surjective}%
\index{binary relation!surjection|textbf}%
\index{surjection|see{binary relation}}
when it has the $[\ge 1\ \text{arrows
    \textbf{in}}]$ property.  That is, every point in the right-hand,
     codomain column has at least one arrow pointing to it.

\item  \emph{total} %
\index{binary relation!total|textbf}%
%\index{total function|seealso{binary relation}}
when it has the $[\ge 1\ \text{arrows
       \textbf{out}}]$ property.

\item  \emph{injective}%
\index{binary relation!injection|textbf}%
\index{injection|see{binary relation}} 
when it has the $[\le 1\ \text{arrow
    \textbf{in}}]$ property.

\item  \emph{bijective}%
\index{binary relation!bijection|textbf}%
\index{bijection|see{binary relation}} when it has both the $[=1\ \text{arrow
    \textbf{out}}]$ and the $[=1\ \text{arrow \textbf{in}}]$ property.
\end{itemize}
\end{definition}

From here on, we'll stop mentioning the arrows in these properties and for
example, just write $[\le 1\ \text{in}]$ instead of $[\le 1\ \text{arrows
  in}]$.

So in the diagrams above, the relation on the left has the
$[=1\ \text{out}]$ and $[\ge 1\ \text{in}]$ properties, which means it
is a total, surjective function.  But it does not have the $[\le
  1\ \text{in}]$ property because element 3 has two arrows going into
it; it is not injective.

The relation on the right has the $[=1\ \text{out}]$ and $[\le
  1\ \text{in}]$ properties, which means it is a total, injective
function.  But it does not have the $[\ge 1\ \text{in}]$ property
because element 4 has no arrow going into it; it is
not surjective.

The arrows in a diagram for $R$ correspond, of course, exactly to the
pairs in the graph of $R$.  Notice that the arrows alone are not
enough to determine, for example, if $R$ has the $[\ge
  1\ \text{out}]$, total, property.  If all we knew were the arrows,
we wouldn't know about any points in the domain column that had no
arrows out.  In other words, $\graph{R}$ alone does not determine
whether $R$ is total: we also need to know what $\domain{R}$ is.

\begin{example}
  The function defined by the formula $1/x^2$ has the $[\ge 1\
  \text{out}]$ property if its domain is $\reals^+$, but not if its domain
  is some set of real numbers including 0.  It has the $[=1\ \text{in}]$
  and $[=1\ \text{out}]$ property if its domain and codomain are both
  $\reals^+$, but it has neither the $[\le 1\ \text{in}]$ nor the $[\ge 1\
  \text{out}]$ property if its domain and codomain are both $\reals$.
\end{example}

\subsection{Relational Images}
The idea of the image of a set under a function extends directly to
relations.

\begin{definition}
  The \term{image}%
\index{binary relation!image} of a set $Y$ under a relation $R$ written $R(Y)$,
  is the set of elements of the codomain $B$ of $R$ that are related to
  some element in $Y$.  In terms of the relation diagram, $R(Y)$ is the
  set of points with an arrow coming in that starts from some point in $Y$.
\iffalse
, namely,
\[
R(Y) \eqdef \set{b \in B \suchthat yRb \text{ for some } y \in Y}.
\]\fi
The \term{range} $\range{R}$ of $R$ is the image $R(A)$ of the domain
$A$ of $R$.  That is, $\range{R}$ is the set of all points in the
codomain with an arrow coming in.
\end{definition}

For example, the set of subject numbers that Meyer is in charge of in
Spring '10 is exactly $\inchrg(\text{A. Meyer})$.  To figure out what
this is, we look for all the arrows in the $\inchrg$ diagram that
start at ``A. Meyer,'' and see which subject-numbers are at the other
end of these arrows.  Looking at the list~\eqref{incharge-pairs} of
pairs in $\graph{\inchrg}$, we see that these subject-numbers are
$\set{\text{6.042, 18.062, 6.844}}$.  Similarly, to find the subject
numbers that either Freeman or Eng are in charge of, we can collect
all the arrows that start at either ``G. Freeman,'' or ``T. Eng'' and,
again, see which subject-numbers are at the other end of these arrows.
This is $\inchrg(\set{\text{G. Freeman}, \text{T. Eng}})$.  Looking
again at the list~\eqref{incharge-pairs}, we see that
\[
\inchrg(\set{\text{G. Freeman}, \text{T. Eng}}) = \set{\text{6.011, 6.881, 6.882, 6.UAT}}
\]
Finally, $\facdom$ is the set of all in-charge instructors, so
$\inchrg(\facdom)$ is the set of all the subjects listed for Spring
'10.

\subsubsection{Inverse Relations and Images}

\begin{definition}
The \emph{inverse}, $\inv{R}$ of a relation $R: A \to B$ is the
relation from $B$ to $A$ defined by the rule
\[
b \mrel{\inv{R}} a\ \ \QIFF\ \ a \mrel{R} b.
\]
\end{definition}
In other words, $\inv{R}$ is the relation you get by reversing the
direction of the arrows in the diagram of $R$.

\begin{definition}
The \emph{inverse image} \index{binary reversing!inverse image|textbf} of a set
$X \subseteq B$ under the relation $R$ is defined to be $\inv{R}(X)$,
namely, the set of elements in $A$ connected by an arrow to some
element in $B$.  The \emph{support} \index{binary relation!support}
$\support{R}$ is defined to $\inv{R}(B)$, namely, the set of domain
elements with at least one arrow out.  The support of $R$ is also
called the \term{domain of definition}\index{binary relation!domain of definition}
of $R$.
\end{definition}

Continuing with the in-charge example above, the set of instructors in
charge of 6.UAT in Spring '10 is exactly the inverse image of
$\set{\text{6.UAT}}$ under the $\inchrg$ relation.  From the
list~\eqref{incharge-pairs}, we see that Eng and Freeman are both in
charge of 6.UAT, that is,
\[
\set{\text{T. Eng}, \text{D. Freeman}} \subseteq \inv{\inchrg}(\set{\text{6.UAT}}).
\]
We can't assert equality here because there may be additional pairs
further down the list showing that additional instructors are
co-incharge of 6.UAT.

Now let $\introsub$ be the set of introductory course 6 subject
numbers.  These are the subject numbers that start with ``6.0.''  So
the set of names of the instructors who were in-charge of introductory
course 6 subjects in Spring '10, is $\inv{\inchrg}(\introsub)$.  From
the part of the $\inchrg$ list shown in~\eqref{incharge-pairs}, we see
that Meyer, Leighton, Freeman, and Guttag were among the instructors
in charge of introductory subjects in Spring '10.  That is,
\[
\set{\text{Meyer, Leighton, Freeman, Guttag}} \subseteq \inv{\inchrg}(\introsub).
\]
Finally, $\inv{\inchrg}(\subnums)$ is the set of all instructors who
were in charge of a subject listed for Spring '10.



\iffalse
It gets interesting when we write composite expressions mixing images,
inverse images and set operations.  For example, $T(\inv{T}(D))$ is
the set of Spring '09 subjects that have an instructor in charge who
also is in in charge of an introductory subject.  So $T(\inv{T}(D)) -
D$ are the advanced subjects with someone in-charge who is also
in-charge of an introductory subject.  Similarly, $\inv{T}(D) \intersect
\inv{T}(N-D)$ is the set of faculty in charge of both an introductory \emph{and}
an advanced subject in Spring '09.
\fi

\begin{problems}
\practiceproblems
\pinput{TP_inverse_relation_table}
\pinput{TP_injective_reals}
\pinput{TP_graph_of_R}
%\pinput{TP_Inverse_Relations}  subsumed by TP_inverse_relation_table
\pinput{TP_In_Sur_and_Bijections}
\pinput{TP_composition_of_jections}
\pinput{TP_total_inj_not_bij}

\classproblems
\pinput{CP_surj_relation}
\pinput{CP_predicate_jections}
\pinput{TP_jective_expressions}

\homeworkproblems
%\pinput{PS_composition_of_jections}
\pinput{PS_composition_to_bijection}  %OK
\pinput{PS_function_composition}
\pinput{PS_relational_properties_proofs}
\pinput{FP_logical_jections}
%\pinput{PS_relation_matrices} %moved to digraphs
\pinput{CP_web_search}

\examproblems
\pinput{FP_sum_of_digits_bijection}
\pinput{MQ_identify_relations}
\pinput{MQ_predicate_jections}
\pinput{FP_inj_expressions}
\pinput{MQ_func_composition_inj_surj}
\pinput{MQ_surj_inj_expressions}
\pinput{FP_jections_nofunc}
\pinput{FP_infinite_sequence_injection}
\end{problems}


\section{Finite Cardinality}\label{mappingrule_sec}
A finite set is one that has only a finite number of elements.  This
number of elements is the ``size'' or \emph{cardinality} of the set:
\begin{definition}\label{fin_card_def}
If $A$ is a finite set, the \term{cardinality} $\card{A}$ of $A$ is
the number of elements in $A$.
\end{definition}
A finite set may have no elements (the empty set), or one element, or
two elements,\dots, so the cardinality of finite sets is always a
nonnegative integer.

Now suppose $R:A \to B$ is a function.  This means that every element
of $A$ contributes at most one arrow to the diagram for $R$, so the
number of arrows is at most the number of elements in $A$.  That is,
if $R$ is a function, then
\[
\card{A} \geq \#\text{arrows}.
\]
If $R$ is also surjective, then every element of $B$ has an arrow into
it, so there must be at least as many arrows in the diagram as the
size of $B$.  That is,
\[
\#\text{arrows} \geq \card{B}.
\]
Combining these inequalities implies that if $R$ is a surjective
function, then $\card{A} \geq \card{B}$.

In short, if we write $A \surj B$ to mean that there is a surjective
function from $A$ to $B$, then we've just proved a lemma: if $A \surj
B$ for finite sets $A,B$, then $\card{A} \geq \card{B}$.  The
following definition and lemma lists this statement and three similar
rules relating domain and codomain size to relational properties.

\begin{definition}\label{bigger}
  Let $A,B$ be (not necessarily finite) sets.  Then
  \begin{enumerate}
  \item $A$ \term{$\surj$}\index{binary relation!surj} $B$ iff there is a surjective
    \emph{function} from $A$ to $B$.

  \item $A$ \term{$\inj$}\index{binary relation!inj} $B$ iff there is an injective
    \emph{total} relation from $A$ to $B$.

  \item $A$ \term{$\bij$}\index{binary relation!bij} $B$ iff there is a bijection from $A$ to
    $B$.

  \end{enumerate}
\end{definition}

\begin{lemma}\label{maprule_implies}  \mbox{ }
For finite sets $A,B$:

\begin{enumerate}

\item\label{mapping-sur} If $A \surj B$, then $\card{A} \geq
  \card{B}$.

\item\label{mapping-inj} If $A \inj B$, then $\card{A} \leq \card{B}$.

\item\label{mapping-bij} If $A \bij B$, then $\card{A} = \card{B}$.
\end{enumerate}

\end{lemma}

\begin{proof}
 We've already given an ``arrow'' proof of
 implication~\ref{mapping-sur}.
 Implication~\ref{mapping-inj}.\ follows immediately from the fact
 that if $R$ has the $[\le 1\ \text{out}]$, function property, and the
 $[\ge 1\ \text{in}]$, surjective property, then $\inv{R}$ is total
 and injective, so $A \surj B$ iff $B \inj A$.  Finally, since a
 bijection is both a surjective function and a total injective
 relation, implication~\ref{mapping-bij}.\ is an immediate consequence
 of the first two.
\end{proof}

Lemma~\ref{maprule_implies}.\ref{mapping-sur}.\ has a converse: if the
size of a finite set $A$ is greater than or equal to the size of
another finite set $B$ then it's always possible to define a
surjective function from $A$ to $B$.  In fact, the surjection can be a
total function.  To see how this works, suppose for example that
\begin{align*}
A & =\set{a_0,a_1,a_2,a_3,a_4,a_5}\\ B & =\set{b_0,b_1,b_2,b_3}.
\end{align*}
Then define a total function $f:A\to B$ by the rules
\[
f(a_0) \eqdef b_0,\ f(a_1) \eqdef b_1,\ f(a_2) \eqdef b_2,\ f(a_3)=
f(a_4)=f(a_5) \eqdef b_3.
\]
More concisely,
\[
f(a_i) \eqdef b_{\min(i,3)},
\]
for $0 \le i \le 5$.  Since $5 \geq 3$, this $f$ is a surjection.
\iffalse In fact, if $A$ and $B$ are finite sets of the same size,
then we could also define a bijection from $A$ to $B$ by this method.
\fi 

So we have figured out that if $A$ and $B$ are finite sets, then
$\card{A} \geq \card{B}$ \emph{if and only if} $A \surj B$.  All told,
this argument wraps up the proof of a theorem that summarizes the
whole finite cardinality story:
\begin{theorem}\label{maprul_thm}
[Mapping Rules] \mbox{} For \emph{finite} sets $A,B$,
\begin{align}
\card{A} \geq \card{B} & \qiff A \surj B,\label{sur_ge_fincard}\\
\card{A} \leq \card{B} & \qiff A \inj B,\label{inj_le_fincard}\\
\card{A} = \card{B} & \qiff A \bij B.\label{bij_same_fincard}
\end{align}
\end{theorem}%
\index{Mapping Rules!for finite sets|textbf}%
%\index{bijection!seealso{Mapping Rules}}

\subsection{How Many Subsets of a Finite Set?}
As an application of the bijection mapping%
\index{Mapping Rules!for finite sets!bijection}
rule~\eqref{bij_same_fincard}, we can give an easy proof of:
\begin{theorem}\label{powset_fincard}
There are $2^n$ subsets of an $n$-element set.  That is,
\[
\card{A} = n \qimplies \card{\power(A)} = 2^n.
\]
\end{theorem}

For example, the three-element set $\set{a_1, a_2, a_3}$ has eight
different subsets: %
\[
\begin{array}{cccc}
\emptyset & \set{a_1} & \set{a_2} & \set{a_1, a_2} \\ \set{a_3} &
\set{a_1, a_3} & \set{a_2, a_3} & \set{a_1, a_2, a_3}
\end{array}
\]

Theorem~\ref{powset_fincard} follows from the fact that there is a
simple bijection from subsets of $A$ to $\set{0,1}^n$, the $n$-bit
sequences.  Namely, let $a_1, a_2, \dots, a_n$ be the elements of $A$.
The bijection maps each subset of $S \subseteq A$ to the bit sequence
$(b_1, \dots, b_n)$ defined by the rule that
\[
b_i = 1 \qiff a_i \in S.
\]
For example, if $n = 10$, then the subset $\set{a_2, a_3, a_5, a_7,
  a_{10}}$ maps to a 10-bit sequence as follows: %
\[
\begin{array}{rrrrrrrrrrrrr}
\text{subset:} & \{ & & a_2, & a_3, & & a_5, & & a_7, & & & a_{10} &
\} \\ \text{sequence:} & ( & 0, & 1, & 1, & 0, & 1, & 0, & 1, & 0, &
0, & 1 & )
\end{array}
\]
Now by bijection case of the Mapping Rules~\ref{maprul_thm}.\eqref{bij_same_fincard},
\[
\card{\power(A)} = \card{\set{0,1}^n}.
\]
But every computer scientist knows\footnote{In case you're someone who
  doesn't know how many $n$-bit sequences there are, you'll find the
  $2^n$ explained in Section~\ref{2nsubsets}.}
  that there are $2^n$ $n$-bit sequences!  So we've proved
  Theorem~\ref{powset_fincard}!

\begin{problems}
\practiceproblems
\pinput{TP_Images}

\classproblems
\pinput{CP_set_product_bijection}
\pinput{CP_mapping_rule}

\end{problems}

\endinput

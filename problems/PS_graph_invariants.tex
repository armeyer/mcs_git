\documentclass[problem]{mcs}

\begin{pcomments}
    \pcomment{PS_graph_invariants}
    \pcomment{Ben Eysenbach, May 2015}
    \pcomment{NEEDS A LOT OF WORK: confusing, long winded story}
\end{pcomments}

\pkeywords{
    state_machine
    preserved_invariant
    graph_walk
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
Ben Bitwiddle has decided to skip school and spend the day at the
beach.  When he gets home, he realizes that his parents will know he
skipped school when they look at the gas level and see there are only
8 gallons left.  He know it takes 7 gallons of gas to get to the beach
and back, so he figures he must have had 15 gallons of gas in the tank
when he left home.

Luckily, the nearby gas stations are having a special deal.  Instead
of paying for the number of gallons of gas you buy, you pay a fixed
cost and then get to fill up your tank until it has $k$ times as much
gas as it had when you rolled into the gas station.  The value of $k$
is different for each gas station:

\begin{figure}[h]
  \centering
\begin{tabular}{|c|c|}
  \hline
  Location of Gas Station & $k$ \\
  \hline 
  Arlington & 9 \\
  Brookline & 3 \\
  Cambridge & 10 \\
  Dover & 2 \\
  \hline
\end{tabular}
\end{figure}

Unfortunately, Ben only remembers how to drive from between certain
pairs of towns. He knows how much gas is required for each leg:

\begin{figure}[h]
  \centering
\begin{tabular}{|c|c|}
  \hline
  Leg & Gas Required \\
  \hline
  Home $\rightarrow$ Arlington & 7 \\
  Arlington $\rightarrow$ Brookline & 1 \\
  Brookline $\rightarrow$ Cambridge & 2 \\
  Cambridge $\rightarrow$ Dover & 2 \\
  Dover $\rightarrow$ Brookline & 1 \\
  Dover $\rightarrow$ Home & 1 \\
  Cambridge $\rightarrow$ Home & 9 \\
  \hline
\end{tabular}
\end{figure}

 Note that he may know how to drive $A \rightarrow B$ but not know how
 to drive $B \rightarrow A$. In addition to these routes, Ben also
 knows how to drive a loop around his house which requires 7 gallons of
 gas.
 
The rules of the deal say that after you have visited gas station $A$,
you must visit another gas station before returning to gas station
$A$.

\textbf{Part 1}: Is it possible for Ben to visit a sequence of gas
stations and return home with exactly 8 gallons in his tank? If
possible, give a sequence of gas stations. If not, explain why.

\textbf{Part 2}: Before heading out, Ben remembers that he took a
short detour on his way to the beach. This detour used up a gallon of
gas, so the car must have had 16 gallons when he left home.

Is it now possible for Ben to visit a sequence of gas stations and
return home with exactly 8 gallons in his tank? If possible, give a
sequence of gas stations. If not, explain why.


\begin{solution}
\textbf{Part 1}: Any valid path works, as long as it is followed by
the correct number of loops around Ben's house.


\textbf{Part 2}: This problem can be solved using preserved
invariants. Let $x$ be the number of gallons of gas in the car. Each
leg of Ben's journey can be thought of as a state machine
transition. Ben's goal is to arrive at home with 15 gallons. Because
Ben knows a 7 mile loop around his house, it is enough to arrive home
with $15 + 7j$ gallons, where $j$ is a nonnegative integer.


After playing around with a few transitions, we can notice that $x$
has the invariant that $x \text{ mod } 7 \equiv 1$. In this part,
Ben's car begins with 8 gallons. By the preserved invariant, the gas
in the car will always be one greater than a multiple of 7. Because
$16 \text{ mod } 7 \equiv 2 \neq 1$, we can conclude that it is
impossible for Ben to arrive home with exactly 16 gallons of gas.
\end{solution}
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\endinput

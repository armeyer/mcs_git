\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_box_unstacking}
  \pcomment{from: S09 notes}
  \pcomment{S15.ps3}
\end{pcomments}

\pkeywords{
  induction
  ordinary_induction
  potential
  invariance
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}

\inhandout{ The Block Stacking Game\footnote{Excerpted from
    Section~\bref{block-stack-subsection}.} goes as follows: You begin
  with a stack of $n$ boxes.  Then you make a sequence of moves.  In
  each move, you divide one stack of boxes into two nonempty stacks.
  The game ends when you have $n$ stacks, each containing a single
  box.  You earn points for each move; in particular, if you divide
  one stack of height $a + b$ into two stacks with heights $a$ and
  $b$, then you score $ab$ points for that move.  Your overall score
  is the sum of the points that you earn for each move.  What strategy
  should you use to maximize your total score?

  %An example of how the game might proceed beginning with a stack of $n = 10$ boxes
  %as shown in Figure~\ref{fig:stacking-10} at the end of this handout.
  %Can you find a better strategy?
  }

Define the \emph{potential} $p(S)$ of a stack of blocks $S$ to be
$k(k-1)/2$ where $k$ is the number of blocks in $S$.  Define the
potential $p(A)$ of a set of stacks $A$ to be the sum of the
potentials of the stacks in $A$.

\inbook{Generalize Theorem~\bref{stacking} about scores in the stacking game to
s}\inhandout{S}how that for any set of stacks $A$ if a sequence of moves starting
with $A$ leads to another set of stacks $B$ then $p(A) \geq p(B)$, and
the score for this sequence of moves is $p(A)-p(B)$.

\hint Try induction on the number of moves to get from $A$ to $B$.

\begin{solution}
\begin{proof}
The proof is by ordinary induction on the number of moves $n$.  The
induction hypothesis will be
\begin{quote}
$P(n) \eqdef$ If $n$ moves from a set of stacks $A$ leads to a set
  $B$ of stacks, then $p(A) \geq p(B)$ and the score for these $n$
  moves is $p(A)-p(B)$.
\end{quote}

\inductioncase{Base case:} ($n$ = 0) This means no moves have been made and
$B=A$, so it's obvious that $P(0)$ holds.

\inductioncase{Inductive step:} Assume that $P(n)$ is true for some $n \in
\nngint$, and suppose $A$ leads to $B$ in $n+1$ moves.  This means
that $A$ leads to some set of stacks $A_1$, and $A_1$ leads to $B$ in
$n$ steps.  So the inductive hypothesis $P(n)$ implies that $p(A_1)
\geq p(B)$, and the score for going from $A_1$ to $B$ is $p(A_1)-p(B)$.

So all we have to do is show that the score for the single move from
$A$ to $A_1$ is $p(A)-p(A_1) > 0$.  The only difference between $A$
and $A_1$ is that some stack $S \in A$ of size $k>1$ splits into two
stacks of sizes $k_1,k_2 \geq 1$ where $k = k_1+k_2$. The score for
such a move is $k_1k_2$.  Also,
\[
p(S) = \frac{(k_1+k_2)((k_1+k_2)-1)}{2} =
\frac{(k_1^2+ 2k_1k_2+k_2^2)-(k_1 + k_2)}{2},
\]
and the potential of the two stack sets is the sum of their potentials, namely,
\[
\frac{k_1(k_1-1) + k_2(k_2-1)}{2} = \frac{k_1^2 + k_2^2 -(k_1 + k_2)}{2},
\]
So the difference between these potentials equals $k_1k_2>0$, and this is
indeed equal to the score of the move.

\end{proof}

\end{solution}

\end{problem}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

\iffalse

\examspace

\begin{figure}\redrawntrue
\[
\begin{array}{cccccccccccl}
\multicolumn{10}{c}{\textbf{Stack Heights}} & \quad & \textbf{Score} \\
\underline{10}&&&&&&&&& && \\
5&\underline{5}&&&&&&&& && 25 \text{ points} \\
\underline{5}&3&2&&&&&&& && 6 \\
\underline{4}&3&2&1&&&&&& && 4 \\
2&\underline{3}&2&1&2&&&&& && 4 \\
\underline{2}&2&2&1&2&1&&&& && 2 \\
1&\underline{2}&2&1&2&1&1&&& && 1 \\
1&1&\underline{2}&1&2&1&1&1&& && 1 \\
1&1&1&1&\underline{2}&1&1&1&1& && 1 \\
1&1&1&1&1&1&1&1&1&1 && 1 \\ \hline
\multicolumn{10}{r}{\textbf{Total Score}} & = & 45 \text{ points}
\end{array}
\]
\caption{An example of the stacking game with $n = 10$ boxes.  On each
line, the underlined stack is divided in the next step.}
\label{fig:stacking-10}
\end{figure}

\fi

\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_pizza_sale}
  \pcomment{from S09:cp10m}
\end{pcomments}

\pkeywords{
  division_rule
  bijection
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
A pizza house is having a promotional sale. Their commercial reads:
\begin{quotation}\noindent
  We offer 9 different toppings for your pizza!  Buy $3$ large pizzas at
  the regular price, and you can get each one with as many different
  toppings as you wish, absolutely free.  That's $22,369,621$ different
  ways to choose your pizzas!
\end{quotation}
The ad writer was a former Harvard student who had evaluated the
formula $(2^{9})^3/3!$ on his calculator and gotten close to
$22,369,621$.  Unfortunately, $(2^{9})^3/3!$ can't be an integer, so
clearly something is wrong.  What mistaken reasoning might have led
the ad writer to this formula?  Explain how to fix the mistake and get
a correct formula.

\begin{solution}The number of ways to choose toppings for one pizza is the
  number of the possible subsets of the set of 9 toppings, namely,
  $2^{9}$.  The ad writer presumably then used the Product Rule to
  conclude that there were $(2^{9})^3$ \emph{sequences} of three topping
  choices.  Then he probably reasoned that each way of making three
  topping choices arises from $3!$ sequences, so the Division Rule would
  imply that the number of ways to choose three pizzas is $(2^{9})^3/3!$.

  It's true that every set of three \emph{different} topping choices
  arises from $3!$ different length-3 sequences of choices.  The mistake
  is that if some of the three choices are the same, then the set of three
  choices arises from \emph{fewer} than $3!$ sequences.  For example, if
  all three pizzas have the same toppings, there is only one sequence of
  topping choices for them.

  One fix is to consider ways to choose toppings with 1, 2 and 3 different
  topping choices.  There are $2^{9}(2^{9}-1)(2^{9}-2)/3!$ ways to choose
  a set of 3 different choices, $2^{9}(2^{9}-1)$ ways to choose one
  topping choice to be used on two pizzas and a second choice for the
  third pizza, and $2^{9}$ ways to choose one topping for all three
  pizzas, giving
\[
\frac{2^{9}(2^{9}-1)(2^{9}-2)}{3!} + 2^{9}(2^{9}-1) + 2^{9}= 22,500,864.
\]
ways to choose three pizzas.

Alternatively, we can observe that this is exactly the problem of
selecting a dozen donuts of five possible different kinds---except now
there are 3 donuts and $2^9$ kinds.  Hence, there is a bijection to the
number of ($2^9+2$)-bit strings with exactly $2^9-1$ ones and 3 zeros:
\[
\binom{2^9 + 2}{3} = 22,500,864.
\]
\end{solution}

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problems end here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

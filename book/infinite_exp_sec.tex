\section{Really Great Expectations}\label{infinite_expect_sec}

Making independent tosses of a fair coin until some desired pattern
comes up is a simple process you should feel solidly in command of by
now, right?  So how about a bet about the simplest such process
---tossing until a head comes up?  Ok, you're wary of betting with us,
but how about this: we'll let \emph{you set the odds}.

\subsection{Repeating Yourself}
Here's the bet: you make independent tosses of a fair coin until a
head comes up.  Then you will repeat the process.  If a second head
comes up in the same or fewer tosses than the first, you have to start
over yet again.  You keep starting over until you finally toss a run
of tails longer than your first one.  The payment rules are that you
will pay me 1 cent each time you start over.  When you win by finally
getting a run of tails longer than your first one, I will pay you some
generous amount.  And by the way, you're certain to win---whatever
your initial run of tails happened to be, a longer run will occur
again with probability 1!

For example, if your first tosses are \texttt{TTTH}, then you will
keep tossing until you get a run of 4 tails.  So your winning
flips might be
\[
\texttt{TTTHTHTTHHTTHTHTTTHTHHHTTTT}.
\]
In this run there are 10 heads, which means you had to start over 9
times.  So you would have paid me 9 cents by the time you finally won
by tossing 4 tails.  Now you've won, and I'll pay you generously
---how does 25 cents sound?  Maybe you'd rather have \$1?  How about
\$10?

Of course there's a trap here.  Let's calculate your expected
winnings.

Suppose your initial run of tails had length $k$.  After that, each
time a head comes up, you have to start over and try to get $k+1$ tails
in a row.  If we regard your getting $k+1$ tails in a row as a
``failed'' try, and regard your having to start over because a head
came up too soon as a ``successful'' try, then the number of times you
have to start over is the number of tries till the first failure.  So
the expected number of tries will be the mean time to failure, which is
$2^{k+1}$, because the probability of tossing $k+1$ tails in a row is
$2^{-(k+1)}$.

Let $T$ be the length of your initial run of tails.  So $T = k$ means
that your initial tosses were $\texttt{T}^k\texttt{H}$.  Let $R$ be
the number of times you repeat trying to beat your original run of
tails.  So we've figured out that $\expcond{R}{T=k} = 2^{k+1}$.  Now your
expected number of cents won will be $(\text{generous payment} - \expect{R})$.
\]
It's now easy to calculate $\expect{R}$ by conditioning on the value
of $T$:
\[
\expect{R}
     = \sum_{k \in \nngint} \expcond{R}{T=k} \cdot \prob{T=k}
     = \sum_{k \in \nngint}  2^{k+1} \cdot 2^{-(k+1)}
     = \sum_{k \in \nngint} 1 = \infty.
\]

\iffalse
\begin{align*}
\expect{R}
    & = \sum_{k \in \nngint} \expcond{R}{T=k} \cdot \prob{T=k}\\
    & = \sum_{k \in \nngint}  2^{k+1} \cdot 2^{-(k+1)}\\
    & = \sum_{k \in \nngint} 1 = \infty.
\end{align*}
\fi

So you can expect to pay me an infinite number of cents before winning
my ``generous'' payment.  No amount of generosity can make this bet
fair!

We haven't faced infinite expectations until now, but they just popped
up in a very simple way.  In fact this particular example is a special
case of an astonishly general one worked out in
Problem~\ref{PS_infinite_repeat_expectation}: the expected waiting
time for \emph{any} random variable to achieve a larger value is
infinite.

\subsection{St. Petersburg}



\begin{problems}
\classproblems
\pinput{CP_infinite_variance}
\pinput{PS_infinite_repeat_expectation}

\end{problems}

\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_proving_basic_set_identity}
  \pcomment{from: S09.cp2r}
  \pcomment{modest edit by ARM 2/13/11}
\end{pcomments}

\pkeywords{
  logic
  set_theory
  identity
  propositional
  chain_of_iff
  difference
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
\emph{Set Formulas and Propositional Formulas.}
\bparts

\ppart\label{verprop}
Verify that the propositional formula $(P \QAND \bar{Q}) \QOR (P \QAND
Q)$ is equivalent to $P$.

\begin{staffnotes}
If students use truth tables, suggest they try again using cases and/or algebra.
\end{staffnotes}

\begin{solution}
There is a simple verification by truth table with 4 rows which we omit.

There is also a simple cases argument: if $Q$ is \true, then the formula
simplifies to $(P \QAND \false) \QOR (P \QAND \true)$ which further
simplifies to $(\false \QOR P)$ which is equivalent to $P$.

Otherwise, if $Q$ is \textcolor{red}{F}, then the formula simplifies to
$(P \QAND \true) \QOR (P \QAND \false)$ which
is likewise equivalent to $P$.

Finally, there is a proof by propositional algebra:
\begin{align*}
(P \QAND \bar{Q}) \QOR (P \QAND Q) & \iff P \QAND (\bar{Q} \QOR Q) & \text{(distributivity)}\\
  & \iff P \QAND \true \iff P.
\end{align*}
\end{solution}

\ppart Prove that\inhandout{\footnote{The \emph{set difference} $A-B$ of sets $A$ and $B$ is
\[
A-B \eqdef \set{a \in A \suchthat a \notin B}.
\]}}
\[
A = (A-B) \union (A \intersect B)
\]
for all sets, $A, B$, by showing
\[
x \in A \QIFF x \in (A-B) \union (A \intersect B)
\]
for all elements $x$ using the equivalence of part~\eqref{verprop}
in a chain of \QIFF's.

\begin{solution}
Two sets are equal iff they have the same elements, that is, $x$ is in
one set iff $x$ is in the other set, for any $x$.  We'll now prove this for $A$
and $(A-B) \union (A \intersect B)$.

\begin{align*}
\lefteqn{x \in (A-B) \union (A \intersect B)}\\
 & \qiff x \in (A-B) \QOR x \in (A
\intersect B) & \text{(by def of $\union$)}\\
& \qiff (x \in A \QAND \bar{x \in B})\\
& \qquad\qquad \QOR (x \in A \QAND  x \in B)
  & \text{(by def of $\intersect$ and $-$)}\\
& \qiff (P \QAND \bar{Q}) \QOR (P \QAND Q)
     & \text{(where $P \eqdef [x \in A]$ and $Q \eqdef [x \in B]$)}\\
& \qiff P & \text{(by part~\eqref{verprop})}\\
& \qiff x \in A & \text{(by def of $P$)}.
\end{align*}

Of course there are lots of ways to prove such set equality formulas,
but we emphasize this chain-of-\QIFF's approach because it illustrates
a general method.  You can \emph{automate} proving any set equality
involving $\union, \intersect, -$ and complement by reducing
verification of the set equality into checking validity of a
corresponding propositional equivalence.  We know validity can be
checked automatically in lots of ways, for example by truth table or
algebra.  In fact, if a set equality is not valid, this approach can
also be used to find a simple counter-example.
\end{solution}

\begin{staffnotes}
Ask your students if they can now see how to write a program that,
given \emph{any} such set equality, could generate a corresponding
propositional formula and chain-of-\QIFF proof of the equality.
\end{staffnotes}

\eparts
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

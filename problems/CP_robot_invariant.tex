\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP__robot_invariant}
  \pcomment{from: F09.state machines notes problem}
  \pcomment{similar to PS_robot_on_2D_grid}
  \pcomment{S15.ps4}
\end{pcomments}

\pkeywords{
  state_machines
  unreachable_states
  invariant
  integer_grid
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
A robot moves on the two-dimensional integer grid.  It starts out at
$(0,0)$ and is allowed to move in any of these four ways:
\begin{enumerate}
\item $(+2,-1)$: right 2, down 1
\item $(-2,+1)$: left 2, up 1
\item $(+1,+3)$
\item $(-1,-3)$
\end{enumerate}

Prove that this robot can never reach $(1,1)$.
\begin{solution}

\textbf{Solution 1:} Denote the robot's position by $(x,y)$.  Observe
that the quantity $z=x+2y$ does not change when the robot undergoes an
atomic movement of type 1 or type 2.  A type 3 movement increases $z$
by $1+2(3)=7$, while a type 4 movement decreases $z$ by 7.  Thus, the
predicate
\[
P(x,y)\eqdef 7\mid x+2y
\]
is a preserved invariant for the robot.  $P(0,0)$, and the robot
starts at the origin, so by the Invariant Principle, $P$ must
hold for all reachable states $(x,y)$ of the robot.  Since $P(1,1)$ is
false, the robot cannot reach $(1,1)$.

(For any function $f$ of the robot's position $(x,y)$, let $\Delta
f_k(x,y)$ denote the change in $f$ that would result from an atomic
movement of type $k$ starting at $(x,y)$.  We started to formulate our
invariant by defining a function $z$ such that for some $k_0$, $\Delta
z_{k_0}(x,y)$ would be zero regardless of the state $(x,y)$.  In this
way we guaranteed that, as long as all the possible values of $\Delta
z_k(x,y)$ for $k\neq k_0$ were not relatively prime, we would be able
to formulate a simple preserved invariant based on the divisibility of
$z-z(0,0)$.  We developed $P$ by taking $k_0=1$ or $k_0=2$ and
defining $z=x+2y$.  We could just as well have taken $k_0=3$ or
$k_0=4$ instead, defined $z=3x-y$, and constructed the equally valid
and useful preserved invariant $Q(x,y) \eqdef 7\divides 3x-y$.)

\textbf{Solution 2:}
If the robot starts at the origin and makes $a_k$ atomic movements of
type $k$, $k\in \set{1,2,3,4}$, its position will be
\[
(2a_1-2a_2+a_3-a_4,-a_1+a_2+3a_3-3a_4)
\]
Letting $b_1 = a_1 - a_2$ and $b_2 = a_3 - a_4$, we have $(x,y) = (2b_1+b_2,-b_1+3b_2)$,
where $b_1$ and $b_2$ must be integers.
Now, note that $x+2y = 7b_2$.  Thus, the robot's position $(x,y)$ must always
be such that $7\mid x+2y$.  (A preserved invariant true wherever the robot goes!)
Since this requirement is not met with $(x,y)=(1,1)$, therefore the robot cannot reach
$(1,1)$.

(Alternatively, we have $3x-y=7b_1$, so $7\divides 3x-y$ must also hold for
any location of the robot, yet it does not hold for $(x,y)=(1,1)$.)

\textbf{Solution 3:}
From Solution 2, the robot's position must always be 
\[
(2a_1-2a_2+a_3-a_4,-a_1+a_2+3a_3-3a_4)
\]
for some $a_1,a_2,a_3,a_4\in\nngint$.
Now, the system
\begin{align*}
2a_1-2a_2+a_3-a_4&=1\\
-a_1+a_2+3a_3-3a_4&=1
\end{align*}
has no solutions $(a_1,a_2,a_3,a_4)\in\nngint^4$.  (It has solutions in
$\reals^4$ given by $(a_1,a_2,a_3,a_4) = (\frac{2}{7}+s,s,\frac{3}{7}+t,t)$, 
for $s,t\in\reals$.)  Thus the robot, using only the four permissible atomic
movements, cannot possibly reach $(1,1)$. 

\end{solution}

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput


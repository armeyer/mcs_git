\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{MQ_graph_state_machine}
  \pcomment{essentially same as CP_spanning_tree_proc}
  \pcomment{F01 q2-3, F99 Q2-4}
  \pcomment{revised by ARM 2/23/12 to use the well ordered  set $\nngint + \twdone$ }
\end{pcomments}

\pkeywords{
graphs,
state_machines,
connectivity,
well_order,
termination,
partial_correctness
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
 
We apply the following operation to a \textbf{simple graph} $G$:
pick two vertices $u \neq v$ such that either
\begin{enumerate}
\item there is an edge of $G$ between $u$ and $v$, and there is also a path
from $u$ to $v$ which does \emph{not} include this edge; in this case,
delete the edge $\edge{u}{v}$.

\item there is no path from $u$ to $v$; in this case, add the edge
  $\edge{u}{v}$.
\end{enumerate}

Keep repeating these operations until it is no longer possible to find two
vertices $u \neq v$ to which an operation applies.

Assume the vertices of $G$ are the integers $1,2,\dots,n$ for some $n \geq
2$.  This procedure can be modelled as a state machine whose states are
all possible simple graphs with vertices $1,2,\dots,n$.  $G$ is the start
state, and the final states are the graphs on which no operation is
possible.

\bparts
\ppart

Let $G$ be the graph with vertices $\set{1,2,3,4}$ and edges
\[
\set{\set{1,2},\set{3,4}}
\]
How many possible final states are reachable from start state
$G$? \hfill \examrule{1in}

\begin{solution}It's not possible to delete any edge.  The procedure can only
add an edge connecting exactly one of vertices 1 or 2 to exactly one of
vertices 3 or 4, and then terminate.  So there are four possible final
states.
\end{solution}

\ppart
\label{derived} On the line next to each of the derived
state variables below, indicate the \emph{strongest} property from the
list below that the variable is guaranteed to satisfy, no matter what the
starting graph $G$ is.  The properties are:
\begin{center}
\begin{tabular}{ccc}
\emph{constant} & \emph{increasing} & \emph{decreasing}\\
\emph{nonincreasing} & \emph{nondecreasing} & \emph{none of these}
\end{tabular}
\end{center}

For any state, let $e$ be the number of edges in it, and let $c$ be the
number of \textbf{connected components} it has.  Since $e$ may increase or
decrease in a transition, it does not have any of the first four
properties.  The derived variables are:
\begin{enumerate}

\item[0)] $e$ \hfill \underline{\emph{none of these}}


\item[i)] $c$ \hfill \examrule[1.0in]

\begin{solution}
nonincreasing
\end{solution}

\item[ii)]  $c+e$ \hfill \examrule[1.0in]

\begin{solution}
nonincreasing
\end{solution}

\item[iii)] $2c+e$ \hfill \examrule[1.0in]

\begin{solution}
decreasing
\end{solution}

\begin{editingnotes}
USABLE ONLY IF LEXICOGRAPHIC ORDER IS BACK IN TEXT
\item[iv)] $(c,e)$, under the \textbf{lexicographic order} on $\nngint \cross \nngint$.
\hfill \examrule[1.0in]
\end{editingnotes}

\item[iv)] $c+\frac{e}{e+1}$
\hfill \examrule[1.0in]

\begin{solution}
decreasing
\end{solution}

\end{enumerate}

\ppart
Explain why, starting from any state $G$, the procedure
terminates.  If your explanation depends on answers you gave to part~(b),
you must justify those answers.

\begin{solution}
The derived variable iii) is a natural-number valued variable and is
decreasing, so by Theorem~\bref{th:decr}, the procedure must terminate.

\emph{Alternative answer}: derived variable iv) is decreasing, and its
values are all in the set $\nngint + \twdone$ shown in
Section~\bref{to1_well-order} to be a well ordered set of real
numbers.

\begin{editingnotes}
under the lexicographic order on $\nngint \cross \nngint$
which we know from Problem Set 6 is a well ordered set.
\end{editingnotes}

To show that the variable iii) decreases, note that the rule for
deleting an edge ensures that the connectedness relation does not change,
so neither does the number of connected components; therefore the variable
decreases by one when an edge is deleted.  The rule for adding an edge
ensures that the number of connected components decreases by one, so the
variable changes by $-2$ for the reduced number of components and $+1$ for
the added edge, for a net decrease of 1.

Variable iv) decreases when an edge is deleted and the number of
components stays the same.   The rule for adding an edge
ensures that the number of connected components decreases by one, so the
variable changes by $-1$ for the reduced number of components and
increases by an amount $(e+1)/(e+2) - e/(e+1) < 1$ for
the added edge, for a net decrease.
\end{solution}

\ppart Prove that any final state must be an \textbf{unordered tree}
on the set of vertices, that is, a spanning tree.

\begin{solution}
We use the characterization of a tree as a cycle-free,
connected, simple graph.

A final state must be connected, because otherwise there would be two
vertices with no path between them, and then a transition adding the edge
between them would be possible, contradicting finality of the state.

A final state can't have a cycle, because deleting any edge on the
cycle would be a possible transition.
\end{solution}

\eparts
\end{problem}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput

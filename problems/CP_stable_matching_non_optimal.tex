\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_stable_matching_non_optimal}
  \pcomment{from: F07.ps4, revised by ARM 10/8/09}
  \pcomment{S15.ps8}
\end{pcomments}

\pkeywords{
 stable_matching
 stable_marriage
 optimal
 non-optimal
 nonoptimal
 mating_ritual
 }


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
The preferences among 4 boys and 4 girls are partially specified in
the following table:

\begin{center}
\begin{tabular}{|ccccc|}
\hline
B1: & G1 & G2 & --  & --\\
B2: & G2 & G1 & --  & --\\
B3: & --  & --  & G4 & G3\\
B4: & --  & --  & G3 & G4\\
\hline
G1: & B2 & B1 & --  & --\\
G2: & B1 & B2 & --  & --\\
G3: & -- & -- & B3 & B4\\
G4: & -- & -- & B4 & B3\\
\hline
\end{tabular}
\end{center}

\bparts

\ppart  Verify that
\[
 (B1, G1), (B2, G2), (B3, G3), (B4, G4)
\]
will be a stable matching whatever the unspecified preferences may be.

\begin{solution}

\begin{itemize}

\item $B1$ and $B2$ get their 1st choice, so won't be in a rogue couple.

\item $G1$ and $G2$ get their 2nd choices, so won't be in a rogue couple
  with the other two boys, $B3$ or $B4$.  So $G1$ and $G2$ won't be in any
  rogue couple, either.

\item $G3$ and $G4$ get their best remaining choices, so will never be in
  a rogue couple.

\item This leaves no possible rogue partners for $B3$ and $B4$.

\end{itemize}
So the marriages are sure to be stable.

\end{solution}


\ppart Explain why the stable matching above is neither boy-optimal nor
boy-pessimal and so will not be an outcome of the Mating Ritual.
\begin{solution}

Notice that giving $G1$ and $G2$ their first choices, that is, marrying
$(B1, G2)$ and $(B2, G1)$ would also be stable for the same reason.  But
with this switch, $B1$ does worse.  So the stable matching above is not
boy-pessimal.

Likewise, after marrying off the first two boys and girls, giving $B3$ and
$B4$ their best remaining choices, that is, marrying $(B3, G4), (B4, G3)$,
will also be stable.  But with this switch, $B3$ does better.  So the
stable matching above is not boy-optimal.

This implies that the stable matching above would not be produced by the
Mating Ritual.

\end{solution}

\ppart \iffalse (Optional) \fi

Describe how to define a set of marriage preferences among $n$ boys and
$n$ girls which have at least $2^{n/2}$ stable assignments.

\hint Arrange the boys into a list of $n/2$ pairs, and likewise arrange
the girls into a list of $n/2$ pairs of girls.  Choose preferences so that
the $k$th pair of boys ranks the $k$th pair of girls just below the
previous pairs of girls, and likewise for the $k$th pair of girls.  Within
the $k$th pairs, make sure each boy's first choice girl in the pair
prefers the other boy in the pair.

\begin{solution}
  Suppose a match has the two boys in the $k$th pair married to the
  two girls in the $k$th pair, for $1 \leq k \leq n/2$.  A boy John, in
  the $k$th pair of boys will never be in a rogue couple with a girl,
  Jill, who is in the $j$th pair of girls for $j\neq k$, because if $j>k$,
  then Jill prefers her partner in the $j$th pair to John, and if $j<k$
  then John prefers his partner in the $k$th pair to Jill.

  A rogue couple can only involve a boy, John, and a girl, Mary, in the
  same pair, but this is impossible since (exactly) one of John and Mary
  must be married to their preferred choice in their pair.

  Since each boy can be stably married to either of the girls in the $k$th
  pair, and there are $n/2$ pairs, the total number of such stable
  matchings is $2^{n/2}$.
\end{solution}

\eparts

\end{problem}

\endinput

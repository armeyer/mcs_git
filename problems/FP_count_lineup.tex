\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{FP_count_lineup}
  \pcomment{by Rich F09}
\end{pcomments}

\pkeywords{
 predicate_calculus
 counting
 inclusion_exclusion
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
  There are 10 students $A, B, \dots, J$ who will be lined up left to
  right according to the some rules below.

Rule I: Student A must not be rightmost.

Rule II: Student B must be adjacent to C (directly to the left or right of C).

Rule III: Student D is always second.

You may answer the following questions with a numerical formula that
may involve factorials.

\bparts
\ppart
How many possible lineups are there that satisfy all three of these
rules?

\exambox{2.0in}{0.5in}{-0.5in}

\examspace[1.5in]

\begin{solution}
   We may consider the number of ways to place $A, B, C, D$ by cases:
   
   Suppose that $B$ or $C$ is last.  There are still $2$ ways to place $B$ and $C$.
   A may then take any of the remaining 7 spots. So the total is $2 \cdot 7$.
   
   Suppose that neither $B$ or $C$ is last.  There are $6$ (they may be anywhere
   between 3rd to 9th) places to place them together and $2$ ways to order them.
   $A$ may be placed in any of the remaining $6$ places (discounting the 
   last place and the places B and C occupy).  The total is therefore 
   $6 \cdot 2 \cdot 6$.
   
   We know that, in both cases, there are $6!$ ways to place the remaining 6 
   people into the remaining spots, so the total number of possible lineups is:
   \[
     6! \cdot (6 \cdot 2 \cdot 6 + 2 \cdot 7) =
      6! \cdot 86 =
      61920
   \]
\end{solution}

\ppart
How many possible lineups are there that satisfy at least one of these rules?

\examspace[3in]
\begin{solution}
   
   \# lineups satisfying rule I: 
   There are 9 places to place A, and $9!$ ways to place the remaining people.
   
   \[ 9 \cdot 9! \]
   
   \# lineups satisfying rule II:
   We can consider $B$ and $C$ to be one person, so there are $9!$ ways to place them, and
   2 ways to order $B$ and $C$.
   
   \[ 2 \cdot 9! \]
   
   \# lineups satisfying rule III:
   There are $9!$ ways to order the remaining 9 people:
   
   \[ 9! \]
   
   \# lineups satisfying rule I and II:
   If B or C is last, there are $8!$ ways to order the remaining people.
   Otherwise, there are 8 places to place B and C; 7 places to place A; and
   $7!$ ways to order the remaining numbers.
   
   \[ 2 \cdot 8! + 2 \cdot 8 \cdot 7 \cdot 7! \]
   
   \# lineups satisfying rule I and III:
   There are 8 places to put $A$ and $8!$ ways to order the remaining people.
   
   \[ 8 \cdot 8! \]
   
   \# lineups satisfying rule II and III:
   There are 7 places to place $B$ and $C$ together, and $7!$ ways to order
   the remaining people.
   
   \[ 2 \cdot 7 \cdot 7! \]
   
   \# lineups satisfying rule I, II and III:
   From the previous part.
   
   \[ 6! \cdot 86 \]
   
   So the total is, using inclusion-exclusion:
   \[ 
   9 \cdot 9! + 2 \cdot 9! + 9! - (2 \cdot 8! + 2 \cdot 8 \cdot 7 \cdot 7! + 8 \cdot 8! + 2 \cdot 7 \cdot 7!) + 6! \cdot 86 =
   4692 \cdot 6! =
   3378240
   \]
\end{solution}

\eparts
\end{problem}

\endinput
